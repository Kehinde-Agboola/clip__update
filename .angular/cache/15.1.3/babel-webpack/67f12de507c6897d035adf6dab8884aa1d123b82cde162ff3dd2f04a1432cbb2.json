{"ast":null,"code":"import { InjectionToken, Injectable, Inject, ElementRef, Renderer2, Directive, forwardRef, Input, HostListener, Pipe, NgModule } from '@angular/core';\nimport { __awaiter } from 'tslib';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { DOCUMENT } from '@angular/common';\nimport * as ɵngcc0 from '@angular/core';\nconst config = new InjectionToken('config');\nconst NEW_CONFIG = new InjectionToken('NEW_CONFIG');\nconst INITIAL_CONFIG = new InjectionToken('INITIAL_CONFIG');\nconst initialConfig = {\n  suffix: '',\n  prefix: '',\n  thousandSeparator: ' ',\n  decimalMarker: '.',\n  clearIfNotMatch: false,\n  showTemplate: false,\n  showMaskTyped: false,\n  placeHolderCharacter: '_',\n  dropSpecialCharacters: true,\n  hiddenInput: undefined,\n  shownMaskExpression: '',\n  separatorLimit: '',\n  allowNegativeNumbers: false,\n  validation: true,\n  // tslint:disable-next-line: quotemark\n  specialCharacters: ['-', '/', '(', ')', '.', ':', ' ', '+', ',', '@', '[', ']', '\"', \"'\"],\n  leadZeroDateTime: false,\n  patterns: {\n    '0': {\n      pattern: new RegExp('\\\\d')\n    },\n    '9': {\n      pattern: new RegExp('\\\\d'),\n      optional: true\n    },\n    X: {\n      pattern: new RegExp('\\\\d'),\n      symbol: '*'\n    },\n    A: {\n      pattern: new RegExp('[a-zA-Z0-9]')\n    },\n    S: {\n      pattern: new RegExp('[a-zA-Z]')\n    },\n    d: {\n      pattern: new RegExp('\\\\d')\n    },\n    m: {\n      pattern: new RegExp('\\\\d')\n    },\n    M: {\n      pattern: new RegExp('\\\\d')\n    },\n    H: {\n      pattern: new RegExp('\\\\d')\n    },\n    h: {\n      pattern: new RegExp('\\\\d')\n    },\n    s: {\n      pattern: new RegExp('\\\\d')\n    }\n  }\n};\nconst timeMasks = ['Hh:m0:s0', 'Hh:m0', 'm0:s0'];\nconst withoutValidation = ['percent', 'Hh', 's0', 'm0', 'separator', 'd0/M0/0000', 'd0/M0', 'd0', 'M0'];\nclass MaskApplierService {\n  constructor(_config) {\n    this._config = _config;\n    this.maskExpression = '';\n    this.actualValue = '';\n    this.shownMaskExpression = '';\n    this._formatWithSeparators = (str, thousandSeparatorChar, decimalChar, precision) => {\n      const x = str.split(decimalChar);\n      const decimals = x.length > 1 ? `${decimalChar}${x[1]}` : '';\n      let res = x[0];\n      const separatorLimit = this.separatorLimit.replace(/\\s/g, '');\n      if (separatorLimit && +separatorLimit) {\n        if (res[0] === '-') {\n          res = `-${res.slice(1, res.length).slice(0, separatorLimit.length)}`;\n        } else {\n          res = res.slice(0, separatorLimit.length);\n        }\n      }\n      const rgx = /(\\d+)(\\d{3})/;\n      while (thousandSeparatorChar && rgx.test(res)) {\n        res = res.replace(rgx, '$1' + thousandSeparatorChar + '$2');\n      }\n      if (precision === undefined) {\n        return res + decimals;\n      } else if (precision === 0) {\n        return res;\n      }\n      return res + decimals.substr(0, precision + 1);\n    };\n    this.percentage = str => {\n      return Number(str) >= 0 && Number(str) <= 100;\n    };\n    this.getPrecision = maskExpression => {\n      const x = maskExpression.split('.');\n      if (x.length > 1) {\n        return Number(x[x.length - 1]);\n      }\n      return Infinity;\n    };\n    this.checkAndRemoveSuffix = inputValue => {\n      var _a, _b, _c;\n      for (let i = ((_a = this.suffix) === null || _a === void 0 ? void 0 : _a.length) - 1; i >= 0; i--) {\n        const substr = this.suffix.substr(i, (_b = this.suffix) === null || _b === void 0 ? void 0 : _b.length);\n        if (inputValue.includes(substr) && (i - 1 < 0 || !inputValue.includes(this.suffix.substr(i - 1, (_c = this.suffix) === null || _c === void 0 ? void 0 : _c.length)))) {\n          return inputValue.replace(substr, '');\n        }\n      }\n      return inputValue;\n    };\n    this.checkInputPrecision = (inputValue, precision, decimalMarker) => {\n      if (precision < Infinity) {\n        const precisionRegEx = new RegExp(this._charToRegExpExpression(decimalMarker) + `\\\\d{${precision}}.*$`);\n        const precisionMatch = inputValue.match(precisionRegEx);\n        if (precisionMatch && precisionMatch[0].length - 1 > precision) {\n          const diff = precisionMatch[0].length - 1 - precision;\n          inputValue = inputValue.substring(0, inputValue.length - diff);\n        }\n        if (precision === 0 && inputValue.endsWith(decimalMarker)) {\n          inputValue = inputValue.substring(0, inputValue.length - 1);\n        }\n      }\n      return inputValue;\n    };\n    this._shift = new Set();\n    this.clearIfNotMatch = this._config.clearIfNotMatch;\n    this.dropSpecialCharacters = this._config.dropSpecialCharacters;\n    this.maskSpecialCharacters = this._config.specialCharacters;\n    this.maskAvailablePatterns = this._config.patterns;\n    this.prefix = this._config.prefix;\n    this.suffix = this._config.suffix;\n    this.thousandSeparator = this._config.thousandSeparator;\n    this.decimalMarker = this._config.decimalMarker;\n    this.hiddenInput = this._config.hiddenInput;\n    this.showMaskTyped = this._config.showMaskTyped;\n    this.placeHolderCharacter = this._config.placeHolderCharacter;\n    this.validation = this._config.validation;\n    this.separatorLimit = this._config.separatorLimit;\n    this.allowNegativeNumbers = this._config.allowNegativeNumbers;\n    this.leadZeroDateTime = this._config.leadZeroDateTime;\n  }\n  applyMaskWithPattern(inputValue, maskAndPattern) {\n    const [mask, customPattern] = maskAndPattern;\n    this.customPattern = customPattern;\n    return this.applyMask(inputValue, mask);\n  }\n  applyMask(inputValue, maskExpression, position = 0, justPasted = false, backspaced = false, cb = () => {}) {\n    if (inputValue === undefined || inputValue === null || maskExpression === undefined) {\n      return '';\n    }\n    let cursor = 0;\n    let result = '';\n    let multi = false;\n    let backspaceShift = false;\n    let shift = 1;\n    let stepBack = false;\n    if (inputValue.slice(0, this.prefix.length) === this.prefix) {\n      inputValue = inputValue.slice(this.prefix.length, inputValue.length);\n    }\n    if (!!this.suffix && (inputValue === null || inputValue === void 0 ? void 0 : inputValue.length) > 0) {\n      inputValue = this.checkAndRemoveSuffix(inputValue);\n    }\n    const inputArray = inputValue.toString().split('');\n    if (maskExpression === 'IP') {\n      this.ipError = !!(inputArray.filter(i => i === '.').length < 3 && inputArray.length < 7);\n      maskExpression = '099.099.099.099';\n    }\n    const arr = [];\n    for (let i = 0; i < inputValue.length; i++) {\n      if (inputValue[i].match('\\\\d')) {\n        arr.push(inputValue[i]);\n      }\n    }\n    if (maskExpression === 'CPF_CNPJ') {\n      this.cpfCnpjError = !!(arr.length !== 11 && arr.length !== 14);\n      if (arr.length > 11) {\n        maskExpression = '00.000.000/0000-00';\n      } else {\n        maskExpression = '000.000.000-00';\n      }\n    }\n    if (maskExpression.startsWith('percent')) {\n      if (inputValue.match('[a-z]|[A-Z]') || inputValue.match(/[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,\\/.]/)) {\n        inputValue = this._stripToDecimal(inputValue);\n        const precision = this.getPrecision(maskExpression);\n        inputValue = this.checkInputPrecision(inputValue, precision, this.decimalMarker);\n      }\n      if (inputValue.indexOf('.') > 0 && !this.percentage(inputValue.substring(0, inputValue.indexOf('.')))) {\n        const base = inputValue.substring(0, inputValue.indexOf('.') - 1);\n        inputValue = `${base}${inputValue.substring(inputValue.indexOf('.'), inputValue.length)}`;\n      }\n      if (this.percentage(inputValue)) {\n        result = inputValue;\n      } else {\n        result = inputValue.substring(0, inputValue.length - 1);\n      }\n    } else if (maskExpression.startsWith('separator')) {\n      if (inputValue.match('[wа-яА-Я]') || inputValue.match('[ЁёА-я]') || inputValue.match('[a-z]|[A-Z]') || inputValue.match(/[-@#!$%\\\\^&*()_£¬'+|~=`{}\\[\\]:\";<>.?\\/]/) || inputValue.match('[^A-Za-z0-9,]')) {\n        inputValue = this._stripToDecimal(inputValue);\n      }\n      inputValue = inputValue.length > 1 && inputValue[0] === '0' && inputValue[1] !== this.decimalMarker && !backspaced ? inputValue.slice(1, inputValue.length) : inputValue;\n      // TODO: we had different rexexps here for the different cases... but tests dont seam to bother - check this\n      //  separator: no COMMA, dot-sep: no SPACE, COMMA OK, comma-sep: no SPACE, COMMA OK\n      const thousandSeperatorCharEscaped = this._charToRegExpExpression(this.thousandSeparator);\n      const decimalMarkerEscaped = this._charToRegExpExpression(this.decimalMarker);\n      const invalidChars = '@#!$%^&*()_+|~=`{}\\\\[\\\\]:\\\\s,\\\\.\";<>?\\\\/'.replace(thousandSeperatorCharEscaped, '').replace(decimalMarkerEscaped, '');\n      const invalidCharRegexp = new RegExp('[' + invalidChars + ']');\n      if (inputValue.match(invalidCharRegexp)) {\n        inputValue = inputValue.substring(0, inputValue.length - 1);\n      }\n      const precision = this.getPrecision(maskExpression);\n      inputValue = this.checkInputPrecision(inputValue, precision, this.decimalMarker);\n      const strForSep = inputValue.replace(new RegExp(thousandSeperatorCharEscaped, 'g'), '');\n      result = this._formatWithSeparators(strForSep, this.thousandSeparator, this.decimalMarker, precision);\n      const commaShift = result.indexOf(',') - inputValue.indexOf(',');\n      const shiftStep = result.length - inputValue.length;\n      if (shiftStep > 0 && result[position] !== ',') {\n        backspaceShift = true;\n        let _shift = 0;\n        do {\n          this._shift.add(position + _shift);\n          _shift++;\n        } while (_shift < shiftStep);\n      } else if (commaShift !== 0 && position > 0 && !(result.indexOf(',') >= position && position > 3) || !(result.indexOf('.') >= position && position > 3) && shiftStep <= 0) {\n        this._shift.clear();\n        backspaceShift = true;\n        shift = shiftStep;\n        position += shiftStep;\n        this._shift.add(position);\n      } else {\n        this._shift.clear();\n      }\n    } else {\n      for (\n      // tslint:disable-next-line\n      let i = 0, inputSymbol = inputArray[0]; i < inputArray.length; i++, inputSymbol = inputArray[i]) {\n        if (cursor === maskExpression.length) {\n          break;\n        }\n        if (this._checkSymbolMask(inputSymbol, maskExpression[cursor]) && maskExpression[cursor + 1] === '?') {\n          result += inputSymbol;\n          cursor += 2;\n        } else if (maskExpression[cursor + 1] === '*' && multi && this._checkSymbolMask(inputSymbol, maskExpression[cursor + 2])) {\n          result += inputSymbol;\n          cursor += 3;\n          multi = false;\n        } else if (this._checkSymbolMask(inputSymbol, maskExpression[cursor]) && maskExpression[cursor + 1] === '*') {\n          result += inputSymbol;\n          multi = true;\n        } else if (maskExpression[cursor + 1] === '?' && this._checkSymbolMask(inputSymbol, maskExpression[cursor + 2])) {\n          result += inputSymbol;\n          cursor += 3;\n        } else if (this._checkSymbolMask(inputSymbol, maskExpression[cursor])) {\n          if (maskExpression[cursor] === 'H') {\n            if (Number(inputSymbol) > 2) {\n              cursor += 1;\n              this._shiftStep(maskExpression, cursor, inputArray.length);\n              i--;\n              if (this.leadZeroDateTime) {\n                result += '0';\n              }\n              continue;\n            }\n          }\n          if (maskExpression[cursor] === 'h') {\n            if (result === '2' && Number(inputSymbol) > 3) {\n              cursor += 1;\n              i--;\n              continue;\n            }\n          }\n          if (maskExpression[cursor] === 'm') {\n            if (Number(inputSymbol) > 5) {\n              cursor += 1;\n              this._shiftStep(maskExpression, cursor, inputArray.length);\n              i--;\n              if (this.leadZeroDateTime) {\n                result += '0';\n              }\n              continue;\n            }\n          }\n          if (maskExpression[cursor] === 's') {\n            if (Number(inputSymbol) > 5) {\n              cursor += 1;\n              this._shiftStep(maskExpression, cursor, inputArray.length);\n              i--;\n              if (this.leadZeroDateTime) {\n                result += '0';\n              }\n              continue;\n            }\n          }\n          const daysCount = 31;\n          if (maskExpression[cursor] === 'd') {\n            if (Number(inputSymbol) > 3 && this.leadZeroDateTime || Number(inputValue.slice(cursor, cursor + 2)) > daysCount || inputValue[cursor + 1] === '/') {\n              cursor += 1;\n              this._shiftStep(maskExpression, cursor, inputArray.length);\n              i--;\n              if (this.leadZeroDateTime) {\n                result += '0';\n              }\n              continue;\n            }\n          }\n          if (maskExpression[cursor] === 'M') {\n            const monthsCount = 12;\n            // mask without day\n            const withoutDays = cursor === 0 && (Number(inputSymbol) > 2 || Number(inputValue.slice(cursor, cursor + 2)) > monthsCount || inputValue[cursor + 1] === '/');\n            // day<10 && month<12 for input\n            const day1monthInput = inputValue.slice(cursor - 3, cursor - 1).includes('/') && (inputValue[cursor - 2] === '/' && Number(inputValue.slice(cursor - 1, cursor + 1)) > monthsCount && inputValue[cursor] !== '/' || inputValue[cursor] === '/' || inputValue[cursor - 3] === '/' && Number(inputValue.slice(cursor - 2, cursor)) > monthsCount && inputValue[cursor - 1] !== '/' || inputValue[cursor - 1] === '/');\n            // 10<day<31 && month<12 for input\n            const day2monthInput = Number(inputValue.slice(cursor - 3, cursor - 1)) <= daysCount && !inputValue.slice(cursor - 3, cursor - 1).includes('/') && inputValue[cursor - 1] === '/' && (Number(inputValue.slice(cursor, cursor + 2)) > monthsCount || inputValue[cursor + 1] === '/');\n            // day<10 && month<12 for paste whole data\n            const day1monthPaste = Number(inputValue.slice(cursor - 3, cursor - 1)) > daysCount && !inputValue.slice(cursor - 3, cursor - 1).includes('/') && !inputValue.slice(cursor - 2, cursor).includes('/') && Number(inputValue.slice(cursor - 2, cursor)) > monthsCount;\n            // 10<day<31 && month<12 for paste whole data\n            const day2monthPaste = Number(inputValue.slice(cursor - 3, cursor - 1)) <= daysCount && !inputValue.slice(cursor - 3, cursor - 1).includes('/') && inputValue[cursor - 1] !== '/' && Number(inputValue.slice(cursor - 1, cursor + 1)) > monthsCount;\n            if (Number(inputSymbol) > 1 && this.leadZeroDateTime || withoutDays || day1monthInput || day2monthInput || day1monthPaste || day2monthPaste) {\n              cursor += 1;\n              this._shiftStep(maskExpression, cursor, inputArray.length);\n              i--;\n              if (this.leadZeroDateTime) {\n                result += '0';\n              }\n              continue;\n            }\n          }\n          result += inputSymbol;\n          cursor++;\n        } else if (this.maskSpecialCharacters.indexOf(maskExpression[cursor]) !== -1) {\n          result += maskExpression[cursor];\n          cursor++;\n          this._shiftStep(maskExpression, cursor, inputArray.length);\n          i--;\n        } else if (this.maskSpecialCharacters.indexOf(inputSymbol) > -1 && this.maskAvailablePatterns[maskExpression[cursor]] && this.maskAvailablePatterns[maskExpression[cursor]].optional) {\n          if (!!inputArray[cursor] && maskExpression !== '099.099.099.099' && maskExpression !== '000.000.000-00' && maskExpression !== '00.000.000/0000-00') {\n            result += inputArray[cursor];\n          }\n          cursor++;\n          i--;\n        } else if (this.maskExpression[cursor + 1] === '*' && this._findSpecialChar(this.maskExpression[cursor + 2]) && this._findSpecialChar(inputSymbol) === this.maskExpression[cursor + 2] && multi) {\n          cursor += 3;\n          result += inputSymbol;\n        } else if (this.maskExpression[cursor + 1] === '?' && this._findSpecialChar(this.maskExpression[cursor + 2]) && this._findSpecialChar(inputSymbol) === this.maskExpression[cursor + 2] && multi) {\n          cursor += 3;\n          result += inputSymbol;\n        } else if (this.showMaskTyped && this.maskSpecialCharacters.indexOf(inputSymbol) < 0 && inputSymbol !== this.placeHolderCharacter) {\n          stepBack = true;\n        }\n      }\n    }\n    if (result.length + 1 === maskExpression.length && this.maskSpecialCharacters.indexOf(maskExpression[maskExpression.length - 1]) !== -1) {\n      result += maskExpression[maskExpression.length - 1];\n    }\n    let newPosition = position + 1;\n    while (this._shift.has(newPosition)) {\n      shift++;\n      newPosition++;\n    }\n    let actualShift = justPasted ? cursor : this._shift.has(position) ? shift : 0;\n    if (stepBack) {\n      actualShift--;\n    }\n    cb(actualShift, backspaceShift);\n    if (shift < 0) {\n      this._shift.clear();\n    }\n    let onlySpecial = false;\n    if (backspaced) {\n      onlySpecial = inputArray.every(char => this.maskSpecialCharacters.includes(char));\n    }\n    let res = `${this.prefix}${onlySpecial ? '' : result}${this.suffix}`;\n    if (result.length === 0) {\n      res = `${this.prefix}${result}`;\n    }\n    return res;\n  }\n  _findSpecialChar(inputSymbol) {\n    return this.maskSpecialCharacters.find(val => val === inputSymbol);\n  }\n  _checkSymbolMask(inputSymbol, maskSymbol) {\n    this.maskAvailablePatterns = this.customPattern ? this.customPattern : this.maskAvailablePatterns;\n    return this.maskAvailablePatterns[maskSymbol] && this.maskAvailablePatterns[maskSymbol].pattern && this.maskAvailablePatterns[maskSymbol].pattern.test(inputSymbol);\n  }\n  _stripToDecimal(str) {\n    return str.split('').filter((i, idx) => {\n      return i.match('^-?\\\\d') || i.match('\\\\s') || i === '.' || i === ',' || i === '-' && idx === 0 && this.allowNegativeNumbers;\n    }).join('');\n  }\n  _charToRegExpExpression(char) {\n    if (char) {\n      const charsToEscape = '[\\\\^$.|?*+()';\n      return char === ' ' ? '\\\\s' : charsToEscape.indexOf(char) >= 0 ? '\\\\' + char : char;\n    }\n    return char;\n  }\n  _shiftStep(maskExpression, cursor, inputLength) {\n    const shiftStep = /[*?]/g.test(maskExpression.slice(0, cursor)) ? inputLength : cursor;\n    this._shift.add(shiftStep + this.prefix.length || 0);\n  }\n}\nMaskApplierService.ɵfac = function MaskApplierService_Factory(t) {\n  return new (t || MaskApplierService)(ɵngcc0.ɵɵinject(config));\n};\nMaskApplierService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: MaskApplierService,\n  factory: MaskApplierService.ɵfac\n});\nMaskApplierService.ctorParameters = () => [{\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [config]\n  }]\n}];\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskApplierService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [config]\n      }]\n    }];\n  }, null);\n})();\nclass MaskService extends MaskApplierService {\n  constructor(document, _config, _elementRef, _renderer) {\n    super(_config);\n    this.document = document;\n    this._config = _config;\n    this._elementRef = _elementRef;\n    this._renderer = _renderer;\n    this.maskExpression = '';\n    this.isNumberValue = false;\n    this.placeHolderCharacter = '_';\n    this.maskIsShown = '';\n    this.selStart = null;\n    this.selEnd = null;\n    /**\n     * Whether we are currently in writeValue function, in this case when applying the mask we don't want to trigger onChange function,\n     * since writeValue should be a one way only process of writing the DOM value based on the Angular model value.\n     */\n    this.writingValue = false;\n    this.maskChanged = false;\n    this.onChange = _ => {};\n  }\n  // tslint:disable-next-line:cyclomatic-complexity\n  applyMask(inputValue, maskExpression, position = 0, justPasted = false, backspaced = false, cb = () => {}) {\n    if (!maskExpression) {\n      return inputValue;\n    }\n    this.maskIsShown = this.showMaskTyped ? this.showMaskInInput() : '';\n    if (this.maskExpression === 'IP' && this.showMaskTyped) {\n      this.maskIsShown = this.showMaskInInput(inputValue || '#');\n    }\n    if (this.maskExpression === 'CPF_CNPJ' && this.showMaskTyped) {\n      this.maskIsShown = this.showMaskInInput(inputValue || '#');\n    }\n    if (!inputValue && this.showMaskTyped) {\n      this.formControlResult(this.prefix);\n      return this.prefix + this.maskIsShown;\n    }\n    const getSymbol = !!inputValue && typeof this.selStart === 'number' ? inputValue[this.selStart] : '';\n    let newInputValue = '';\n    if (this.hiddenInput && !this.writingValue) {\n      let actualResult = this.actualValue.split('');\n      // tslint:disable no-unused-expression\n      inputValue !== '' && actualResult.length ? typeof this.selStart === 'number' && typeof this.selEnd === 'number' ? inputValue.length > actualResult.length ? actualResult.splice(this.selStart, 0, getSymbol) : inputValue.length < actualResult.length ? actualResult.length - inputValue.length === 1 ? actualResult.splice(this.selStart - 1, 1) : actualResult.splice(this.selStart, this.selEnd - this.selStart) : null : null : actualResult = [];\n      // tslint:enable no-unused-expression\n      newInputValue = this.actualValue.length && actualResult.length <= inputValue.length ? this.shiftTypedSymbols(actualResult.join('')) : inputValue;\n    }\n    newInputValue = Boolean(newInputValue) && newInputValue.length ? newInputValue : inputValue;\n    const result = super.applyMask(newInputValue, maskExpression, position, justPasted, backspaced, cb);\n    this.actualValue = this.getActualValue(result);\n    // handle some separator implications:\n    // a.) adjust decimalMarker default (. -> ,) if thousandSeparator is a dot\n    if (this.thousandSeparator === '.' && this.decimalMarker === '.') {\n      this.decimalMarker = ',';\n    }\n    // b) remove decimal marker from list of special characters to mask\n    if (this.maskExpression.startsWith('separator') && this.dropSpecialCharacters === true) {\n      this.maskSpecialCharacters = this.maskSpecialCharacters.filter(item => item !== this.decimalMarker);\n    }\n    this.formControlResult(result);\n    if (!this.showMaskTyped) {\n      if (this.hiddenInput) {\n        return result && result.length ? this.hideInput(result, this.maskExpression) : result;\n      }\n      return result;\n    }\n    const resLen = result.length;\n    const prefNmask = this.prefix + this.maskIsShown;\n    if (this.maskExpression.includes('H')) {\n      const countSkipedSymbol = this._numberSkipedSymbols(result);\n      return result + prefNmask.slice(resLen + countSkipedSymbol);\n    } else if (this.maskExpression === 'IP' || this.maskExpression === 'CPF_CNPJ') {\n      return result + prefNmask;\n    }\n    return result + prefNmask.slice(resLen);\n  }\n  // get the number of characters that were shifted\n  _numberSkipedSymbols(value) {\n    const regex = /(^|\\D)(\\d\\D)/g;\n    let match = regex.exec(value);\n    let countSkipedSymbol = 0;\n    while (match != null) {\n      countSkipedSymbol += 1;\n      match = regex.exec(value);\n    }\n    return countSkipedSymbol;\n  }\n  applyValueChanges(position = 0, justPasted, backspaced, cb = () => {}) {\n    const formElement = this._elementRef.nativeElement;\n    formElement.value = this.applyMask(formElement.value, this.maskExpression, position, justPasted, backspaced, cb);\n    if (formElement === this.document.activeElement) {\n      return;\n    }\n    this.clearIfNotMatchFn();\n  }\n  hideInput(inputValue, maskExpression) {\n    return inputValue.split('').map((curr, index) => {\n      if (this.maskAvailablePatterns && this.maskAvailablePatterns[maskExpression[index]] && this.maskAvailablePatterns[maskExpression[index]].symbol) {\n        return this.maskAvailablePatterns[maskExpression[index]].symbol;\n      }\n      return curr;\n    }).join('');\n  }\n  // this function is not necessary, it checks result against maskExpression\n  getActualValue(res) {\n    const compare = res.split('').filter((symbol, i) => this._checkSymbolMask(symbol, this.maskExpression[i]) || this.maskSpecialCharacters.includes(this.maskExpression[i]) && symbol === this.maskExpression[i]);\n    if (compare.join('') === res) {\n      return compare.join('');\n    }\n    return res;\n  }\n  shiftTypedSymbols(inputValue) {\n    let symbolToReplace = '';\n    const newInputValue = inputValue && inputValue.split('').map((currSymbol, index) => {\n      if (this.maskSpecialCharacters.includes(inputValue[index + 1]) && inputValue[index + 1] !== this.maskExpression[index + 1]) {\n        symbolToReplace = currSymbol;\n        return inputValue[index + 1];\n      }\n      if (symbolToReplace.length) {\n        const replaceSymbol = symbolToReplace;\n        symbolToReplace = '';\n        return replaceSymbol;\n      }\n      return currSymbol;\n    }) || [];\n    return newInputValue.join('');\n  }\n  showMaskInInput(inputVal) {\n    if (this.showMaskTyped && !!this.shownMaskExpression) {\n      if (this.maskExpression.length !== this.shownMaskExpression.length) {\n        throw new Error('Mask expression must match mask placeholder length');\n      } else {\n        return this.shownMaskExpression;\n      }\n    } else if (this.showMaskTyped) {\n      if (inputVal) {\n        if (this.maskExpression === 'IP') {\n          return this._checkForIp(inputVal);\n        }\n        if (this.maskExpression === 'CPF_CNPJ') {\n          return this._checkForCpfCnpj(inputVal);\n        }\n      }\n      return this.maskExpression.replace(/\\w/g, this.placeHolderCharacter);\n    }\n    return '';\n  }\n  clearIfNotMatchFn() {\n    const formElement = this._elementRef.nativeElement;\n    if (this.clearIfNotMatch && this.prefix.length + this.maskExpression.length + this.suffix.length !== formElement.value.replace(/_/g, '').length) {\n      this.formElementProperty = ['value', ''];\n      this.applyMask(formElement.value, this.maskExpression);\n    }\n  }\n  set formElementProperty([name, value]) {\n    Promise.resolve().then(() => this._renderer.setProperty(this._elementRef.nativeElement, name, value));\n  }\n  checkSpecialCharAmount(mask) {\n    const chars = mask.split('').filter(item => this._findSpecialChar(item));\n    return chars.length;\n  }\n  removeMask(inputValue) {\n    return this._removeMask(this._removeSuffix(this._removePrefix(inputValue)), this.maskSpecialCharacters.concat('_').concat(this.placeHolderCharacter));\n  }\n  _checkForIp(inputVal) {\n    if (inputVal === '#') {\n      return `${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n    }\n    const arr = [];\n    for (let i = 0; i < inputVal.length; i++) {\n      if (inputVal[i].match('\\\\d')) {\n        arr.push(inputVal[i]);\n      }\n    }\n    if (arr.length <= 3) {\n      return `${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n    }\n    if (arr.length > 3 && arr.length <= 6) {\n      return `${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n    }\n    if (arr.length > 6 && arr.length <= 9) {\n      return this.placeHolderCharacter;\n    }\n    if (arr.length > 9 && arr.length <= 12) {\n      return '';\n    }\n    return '';\n  }\n  _checkForCpfCnpj(inputVal) {\n    const cpf = `${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `-${this.placeHolderCharacter}${this.placeHolderCharacter}`;\n    const cnpj = `${this.placeHolderCharacter}${this.placeHolderCharacter}` + `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` + `-${this.placeHolderCharacter}${this.placeHolderCharacter}`;\n    if (inputVal === '#') {\n      return cpf;\n    }\n    const arr = [];\n    for (let i = 0; i < inputVal.length; i++) {\n      if (inputVal[i].match('\\\\d')) {\n        arr.push(inputVal[i]);\n      }\n    }\n    if (arr.length <= 3) {\n      return cpf.slice(arr.length, cpf.length);\n    }\n    if (arr.length > 3 && arr.length <= 6) {\n      return cpf.slice(arr.length + 1, cpf.length);\n    }\n    if (arr.length > 6 && arr.length <= 9) {\n      return cpf.slice(arr.length + 2, cpf.length);\n    }\n    if (arr.length > 9 && arr.length < 11) {\n      return cpf.slice(arr.length + 3, cpf.length);\n    }\n    if (arr.length === 11) {\n      return '';\n    }\n    if (arr.length === 12) {\n      if (inputVal.length === 17) {\n        return cnpj.slice(16, cnpj.length);\n      }\n      return cnpj.slice(15, cnpj.length);\n    }\n    if (arr.length > 12 && arr.length <= 14) {\n      return cnpj.slice(arr.length + 4, cnpj.length);\n    }\n    return '';\n  }\n  /**\n   * Propogates the input value back to the Angular model by triggering the onChange function. It won't do this if writingValue\n   * is true. If that is true it means we are currently in the writeValue function, which is supposed to only update the actual\n   * DOM element based on the Angular model value. It should be a one way process, i.e. writeValue should not be modifying the Angular\n   * model value too. Therefore, we don't trigger onChange in this scenario.\n   * @param inputValue the current form input value\n   */\n  formControlResult(inputValue) {\n    if (this.writingValue || this.maskChanged) {\n      this.maskChanged = false;\n      return;\n    }\n    if (Array.isArray(this.dropSpecialCharacters)) {\n      this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(inputValue)), this.dropSpecialCharacters)));\n    } else if (this.dropSpecialCharacters) {\n      this.onChange(this._toNumber(this._checkSymbols(inputValue)));\n    } else {\n      this.onChange(this._removeSuffix(inputValue));\n    }\n  }\n  _toNumber(value) {\n    if (!this.isNumberValue || value === '') {\n      return value;\n    }\n    const num = Number(value);\n    return Number.isNaN(num) ? value : num;\n  }\n  _removeMask(value, specialCharactersForRemove) {\n    return value ? value.replace(this._regExpForRemove(specialCharactersForRemove), '') : value;\n  }\n  _removePrefix(value) {\n    if (!this.prefix) {\n      return value;\n    }\n    return value ? value.replace(this.prefix, '') : value;\n  }\n  _removeSuffix(value) {\n    if (!this.suffix) {\n      return value;\n    }\n    return value ? value.replace(this.suffix, '') : value;\n  }\n  _retrieveSeparatorValue(result) {\n    return this._removeMask(this._removeSuffix(this._removePrefix(result)), this.maskSpecialCharacters);\n  }\n  _regExpForRemove(specialCharactersForRemove) {\n    return new RegExp(specialCharactersForRemove.map(item => `\\\\${item}`).join('|'), 'gi');\n  }\n  _checkSymbols(result) {\n    if (result === '') {\n      return result;\n    }\n    const separatorPrecision = this._retrieveSeparatorPrecision(this.maskExpression);\n    let separatorValue = this._retrieveSeparatorValue(result);\n    if (this.decimalMarker !== '.') {\n      separatorValue = separatorValue.replace(this.decimalMarker, '.');\n    }\n    if (!this.isNumberValue) {\n      return separatorValue;\n    }\n    if (separatorPrecision) {\n      if (result === this.decimalMarker) {\n        return null;\n      }\n      return this._checkPrecision(this.maskExpression, separatorValue);\n    } else {\n      return Number(separatorValue);\n    }\n  }\n  // TODO should think about helpers or separting decimal precision to own property\n  _retrieveSeparatorPrecision(maskExpretion) {\n    const matcher = maskExpretion.match(new RegExp(`^separator\\\\.([^d]*)`));\n    return matcher ? Number(matcher[1]) : null;\n  }\n  _checkPrecision(separatorExpression, separatorValue) {\n    if (separatorExpression.indexOf('2') > 0) {\n      return Number(separatorValue).toFixed(2);\n    }\n    return Number(separatorValue);\n  }\n}\nMaskService.ɵfac = function MaskService_Factory(t) {\n  return new (t || MaskService)(ɵngcc0.ɵɵinject(DOCUMENT), ɵngcc0.ɵɵinject(config), ɵngcc0.ɵɵinject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinject(ɵngcc0.Renderer2));\n};\nMaskService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n  token: MaskService,\n  factory: MaskService.ɵfac\n});\nMaskService.ctorParameters = () => [{\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [DOCUMENT]\n  }]\n}, {\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [config]\n  }]\n}, {\n  type: ElementRef\n}, {\n  type: Renderer2\n}];\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskService, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [config]\n      }]\n    }, {\n      type: ɵngcc0.ElementRef\n    }, {\n      type: ɵngcc0.Renderer2\n    }];\n  }, null);\n})();\n\n// tslint:disable deprecation\n// tslint:disable no-input-rename\nclass MaskDirective {\n  constructor(document, _maskService, _config) {\n    this.document = document;\n    this._maskService = _maskService;\n    this._config = _config;\n    this.maskExpression = '';\n    this.specialCharacters = [];\n    this.patterns = {};\n    this.prefix = '';\n    this.suffix = '';\n    this.thousandSeparator = ' ';\n    this.decimalMarker = '.';\n    this.dropSpecialCharacters = null;\n    this.hiddenInput = null;\n    this.showMaskTyped = null;\n    this.placeHolderCharacter = null;\n    this.shownMaskExpression = null;\n    this.showTemplate = null;\n    this.clearIfNotMatch = null;\n    this.validation = null;\n    this.separatorLimit = null;\n    this.allowNegativeNumbers = null;\n    this.leadZeroDateTime = null;\n    this._maskValue = '';\n    this._position = null;\n    this._maskExpressionArray = [];\n    this._justPasted = false;\n    this.onChange = _ => {};\n    this.onTouch = () => {};\n  }\n  ngOnChanges(changes) {\n    const {\n      maskExpression,\n      specialCharacters,\n      patterns,\n      prefix,\n      suffix,\n      thousandSeparator,\n      decimalMarker,\n      dropSpecialCharacters,\n      hiddenInput,\n      showMaskTyped,\n      placeHolderCharacter,\n      shownMaskExpression,\n      showTemplate,\n      clearIfNotMatch,\n      validation,\n      separatorLimit,\n      allowNegativeNumbers,\n      leadZeroDateTime\n    } = changes;\n    if (maskExpression) {\n      if (maskExpression.currentValue !== maskExpression.previousValue && !maskExpression.firstChange) {\n        this._maskService.maskChanged = true;\n      }\n      this._maskValue = maskExpression.currentValue || '';\n      if (maskExpression.currentValue && maskExpression.currentValue.split('||').length > 1) {\n        this._maskExpressionArray = maskExpression.currentValue.split('||').sort((a, b) => {\n          return a.length - b.length;\n        });\n        this._maskValue = this._maskExpressionArray[0];\n        this.maskExpression = this._maskExpressionArray[0];\n        this._maskService.maskExpression = this._maskExpressionArray[0];\n      }\n    }\n    if (specialCharacters) {\n      if (!specialCharacters.currentValue || !Array.isArray(specialCharacters.currentValue)) {\n        return;\n      } else {\n        this._maskService.maskSpecialCharacters = specialCharacters.currentValue || [];\n      }\n    }\n    // Only overwrite the mask available patterns if a pattern has actually been passed in\n    if (patterns && patterns.currentValue) {\n      this._maskService.maskAvailablePatterns = patterns.currentValue;\n    }\n    if (prefix) {\n      this._maskService.prefix = prefix.currentValue;\n    }\n    if (suffix) {\n      this._maskService.suffix = suffix.currentValue;\n    }\n    if (thousandSeparator) {\n      this._maskService.thousandSeparator = thousandSeparator.currentValue;\n    }\n    if (decimalMarker) {\n      this._maskService.decimalMarker = decimalMarker.currentValue;\n    }\n    if (dropSpecialCharacters) {\n      this._maskService.dropSpecialCharacters = dropSpecialCharacters.currentValue;\n    }\n    if (hiddenInput) {\n      this._maskService.hiddenInput = hiddenInput.currentValue;\n    }\n    if (showMaskTyped) {\n      this._maskService.showMaskTyped = showMaskTyped.currentValue;\n    }\n    if (placeHolderCharacter) {\n      this._maskService.placeHolderCharacter = placeHolderCharacter.currentValue;\n    }\n    if (shownMaskExpression) {\n      this._maskService.shownMaskExpression = shownMaskExpression.currentValue;\n    }\n    if (showTemplate) {\n      this._maskService.showTemplate = showTemplate.currentValue;\n    }\n    if (clearIfNotMatch) {\n      this._maskService.clearIfNotMatch = clearIfNotMatch.currentValue;\n    }\n    if (validation) {\n      this._maskService.validation = validation.currentValue;\n    }\n    if (separatorLimit) {\n      this._maskService.separatorLimit = separatorLimit.currentValue;\n    }\n    if (allowNegativeNumbers) {\n      this._maskService.allowNegativeNumbers = allowNegativeNumbers.currentValue;\n      if (this._maskService.allowNegativeNumbers) {\n        this._maskService.maskSpecialCharacters = this._maskService.maskSpecialCharacters.filter(c => c !== '-');\n      }\n    }\n    if (leadZeroDateTime) {\n      this._maskService.leadZeroDateTime = leadZeroDateTime.currentValue;\n    }\n    this._applyMask();\n  }\n  // tslint:disable-next-line: cyclomatic-complexity\n  validate({\n    value\n  }) {\n    if (!this._maskService.validation || !this._maskValue) {\n      return null;\n    }\n    if (this._maskService.ipError) {\n      return this._createValidationError(value);\n    }\n    if (this._maskService.cpfCnpjError) {\n      return this._createValidationError(value);\n    }\n    if (this._maskValue.startsWith('separator')) {\n      return null;\n    }\n    if (withoutValidation.includes(this._maskValue)) {\n      return null;\n    }\n    if (this._maskService.clearIfNotMatch) {\n      return null;\n    }\n    if (timeMasks.includes(this._maskValue)) {\n      return this._validateTime(value);\n    }\n    if (value && value.toString().length >= 1) {\n      let counterOfOpt = 0;\n      for (const key in this._maskService.maskAvailablePatterns) {\n        if (this._maskService.maskAvailablePatterns[key].optional && this._maskService.maskAvailablePatterns[key].optional === true) {\n          if (this._maskValue.indexOf(key) !== this._maskValue.lastIndexOf(key)) {\n            const opt = this._maskValue.split('').filter(i => i === key).join('');\n            counterOfOpt += opt.length;\n          } else if (this._maskValue.indexOf(key) !== -1) {\n            counterOfOpt++;\n          }\n          if (this._maskValue.indexOf(key) !== -1 && value.toString().length >= this._maskValue.indexOf(key)) {\n            return null;\n          }\n          if (counterOfOpt === this._maskValue.length) {\n            return null;\n          }\n        }\n      }\n      if (this._maskValue.indexOf('{') === 1 && value.toString().length === this._maskValue.length + Number(this._maskValue.split('{')[1].split('}')[0]) - 4) {\n        return null;\n      }\n      if (this._maskValue.indexOf('*') === 1 || this._maskValue.indexOf('?') === 1) {\n        return null;\n      } else if (this._maskValue.indexOf('*') > 1 && value.toString().length < this._maskValue.indexOf('*') || this._maskValue.indexOf('?') > 1 && value.toString().length < this._maskValue.indexOf('?') || this._maskValue.indexOf('{') === 1) {\n        return this._createValidationError(value);\n      }\n      if (this._maskValue.indexOf('*') === -1 || this._maskValue.indexOf('?') === -1) {\n        const length = this._maskService.dropSpecialCharacters ? this._maskValue.length - this._maskService.checkSpecialCharAmount(this._maskValue) - counterOfOpt : this._maskValue.length - counterOfOpt;\n        if (value.toString().length < length) {\n          return this._createValidationError(value);\n        }\n      }\n    }\n    return null;\n  }\n  onPaste() {\n    this._justPasted = true;\n  }\n  onInput(e) {\n    const el = e.target;\n    this._inputValue = el.value;\n    this._setMask();\n    if (!this._maskValue) {\n      this.onChange(el.value);\n      return;\n    }\n    const position = el.selectionStart === 1 ? el.selectionStart + this._maskService.prefix.length : el.selectionStart;\n    let caretShift = 0;\n    let backspaceShift = false;\n    this._maskService.applyValueChanges(position, this._justPasted, this._code === 'Backspace' || this._code === 'Delete', (shift, _backspaceShift) => {\n      this._justPasted = false;\n      caretShift = shift;\n      backspaceShift = _backspaceShift;\n    });\n    // only set the selection if the element is active\n    if (this.document.activeElement !== el) {\n      return;\n    }\n    this._position = this._position === 1 && this._inputValue.length === 1 ? null : this._position;\n    let positionToApply = this._position ? this._inputValue.length + position + caretShift : position + (this._code === 'Backspace' && !backspaceShift ? 0 : caretShift);\n    if (positionToApply > this._getActualInputLength()) {\n      positionToApply = this._getActualInputLength();\n    }\n    if (positionToApply < 0) {\n      positionToApply = 0;\n    }\n    el.setSelectionRange(positionToApply, positionToApply);\n    this._position = null;\n  }\n  onBlur() {\n    if (this._maskValue) {\n      this._maskService.clearIfNotMatchFn();\n    }\n    this.onTouch();\n  }\n  onFocus(e) {\n    if (!this._maskValue) {\n      return;\n    }\n    const el = e.target;\n    const posStart = 0;\n    const posEnd = 0;\n    if (el !== null && el.selectionStart !== null && el.selectionStart === el.selectionEnd && el.selectionStart > this._maskService.prefix.length &&\n    // tslint:disable-next-line\n    e.keyCode !== 38) {\n      if (this._maskService.showMaskTyped) {\n        // We are showing the mask in the input\n        this._maskService.maskIsShown = this._maskService.showMaskInInput();\n        if (el.setSelectionRange && this._maskService.prefix + this._maskService.maskIsShown === el.value) {\n          // the input ONLY contains the mask, so position the cursor at the start\n          el.focus();\n          el.setSelectionRange(posStart, posEnd);\n        } else {\n          // the input contains some characters already\n          if (el.selectionStart > this._maskService.actualValue.length) {\n            // if the user clicked beyond our value's length, position the cursor at the end of our value\n            el.setSelectionRange(this._maskService.actualValue.length, this._maskService.actualValue.length);\n          }\n        }\n      }\n    }\n    const nextValue = !el.value || el.value === this._maskService.prefix ? this._maskService.prefix + this._maskService.maskIsShown : el.value;\n    /** Fix of cursor position jumping to end in most browsers no matter where cursor is inserted onFocus */\n    if (el.value !== nextValue) {\n      el.value = nextValue;\n    }\n    /** fix of cursor position with prefix when mouse click occur */\n    if ((el.selectionStart || el.selectionEnd) <= this._maskService.prefix.length) {\n      el.selectionStart = this._maskService.prefix.length;\n      return;\n    }\n    /** select only inserted text */\n    if (el.selectionEnd > this._getActualInputLength()) {\n      el.selectionEnd = this._getActualInputLength();\n    }\n  }\n  // tslint:disable-next-line: cyclomatic-complexity\n  onKeyDown(e) {\n    var _a;\n    if (!this._maskValue) {\n      return;\n    }\n    this._code = e.code ? e.code : e.key;\n    const el = e.target;\n    this._inputValue = el.value;\n    this._setMask();\n    if (e.keyCode === 38) {\n      e.preventDefault();\n    }\n    if (e.keyCode === 37 || e.keyCode === 8 || e.keyCode === 46) {\n      if (e.keyCode === 8 && el.value.length === 0) {\n        el.selectionStart = el.selectionEnd;\n      }\n      if (e.keyCode === 8 && el.selectionStart !== 0) {\n        // If specialChars is false, (shouldn't ever happen) then set to the defaults\n        this.specialCharacters = ((_a = this.specialCharacters) === null || _a === void 0 ? void 0 : _a.length) ? this.specialCharacters : this._config.specialCharacters;\n        if (this.prefix.length > 1 && el.selectionStart <= this.prefix.length) {\n          el.setSelectionRange(this.prefix.length, this.prefix.length);\n        } else {\n          if (this._inputValue.length !== el.selectionStart && el.selectionStart !== 1) {\n            while (this.specialCharacters.includes(this._inputValue[el.selectionStart - 1].toString()) && (this.prefix.length >= 1 && el.selectionStart > this.prefix.length || this.prefix.length === 0)) {\n              el.setSelectionRange(el.selectionStart - 1, el.selectionStart - 1);\n            }\n          }\n          this.suffixCheckOnPressDelete(e.keyCode, el);\n        }\n      }\n      this.suffixCheckOnPressDelete(e.keyCode, el);\n      if (this._maskService.prefix.length && el.selectionStart <= this._maskService.prefix.length && el.selectionEnd <= this._maskService.prefix.length) {\n        e.preventDefault();\n      }\n      const cursorStart = el.selectionStart;\n      // this.onFocus(e);\n      if (e.keyCode === 8 && !el.readOnly && cursorStart === 0 && el.selectionEnd === el.value.length && el.value.length !== 0) {\n        this._position = this._maskService.prefix ? this._maskService.prefix.length : 0;\n        this._maskService.applyMask(this._maskService.prefix, this._maskService.maskExpression, this._position);\n      }\n    }\n    if (!!this.suffix && this.suffix.length > 1 && this._inputValue.length - this.suffix.length < el.selectionStart) {\n      el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n    } else if (e.keyCode === 65 && e.ctrlKey === true ||\n    // Ctrl+ A\n    e.keyCode === 65 && e.metaKey === true // Cmd + A (Mac)\n    ) {\n      el.setSelectionRange(0, this._getActualInputLength());\n      e.preventDefault();\n    }\n    this._maskService.selStart = el.selectionStart;\n    this._maskService.selEnd = el.selectionEnd;\n  }\n  /** It writes the value in the input */\n  writeValue(inputValue) {\n    return __awaiter(this, void 0, void 0, function* () {\n      if (typeof inputValue === 'object' && inputValue !== null && 'value' in inputValue) {\n        if ('disable' in inputValue) {\n          this.setDisabledState(Boolean(inputValue.disable));\n        }\n        inputValue = inputValue.value;\n      }\n      if (inputValue === undefined) {\n        inputValue = '';\n      }\n      if (typeof inputValue === 'number') {\n        inputValue = String(inputValue);\n        inputValue = this.decimalMarker !== '.' ? inputValue.replace('.', this.decimalMarker) : inputValue;\n        this._maskService.isNumberValue = true;\n      }\n      this._inputValue = inputValue;\n      this._setMask();\n      if (inputValue && this._maskService.maskExpression || this._maskService.maskExpression && (this._maskService.prefix || this._maskService.showMaskTyped)) {\n        // Let the service we know we are writing value so that triggering onChange function wont happen during applyMask\n        this._maskService.writingValue = true;\n        this._maskService.formElementProperty = ['value', this._maskService.applyMask(inputValue, this._maskService.maskExpression)];\n        // Let the service know we've finished writing value\n        this._maskService.writingValue = false;\n      } else {\n        this._maskService.formElementProperty = ['value', inputValue];\n      }\n      this._inputValue = inputValue;\n    });\n  }\n  registerOnChange(fn) {\n    this.onChange = fn;\n    this._maskService.onChange = this.onChange;\n  }\n  registerOnTouched(fn) {\n    this.onTouch = fn;\n  }\n  suffixCheckOnPressDelete(keyCode, el) {\n    if (keyCode === 46 && this.suffix.length > 0) {\n      if (this._inputValue.length - this.suffix.length <= el.selectionStart) {\n        el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n      }\n    }\n    if (keyCode === 8) {\n      if (this.suffix.length > 1 && this._inputValue.length - this.suffix.length < el.selectionStart) {\n        el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n      }\n      if (this.suffix.length === 1 && this._inputValue.length === el.selectionStart) {\n        el.setSelectionRange(el.selectionStart - 1, el.selectionStart - 1);\n      }\n    }\n  }\n  /** It disables the input element */\n  setDisabledState(isDisabled) {\n    this._maskService.formElementProperty = ['disabled', isDisabled];\n  }\n  _repeatPatternSymbols(maskExp) {\n    return maskExp.match(/{[0-9]+}/) && maskExp.split('').reduce((accum, currval, index) => {\n      this._start = currval === '{' ? index : this._start;\n      if (currval !== '}') {\n        return this._maskService._findSpecialChar(currval) ? accum + currval : accum;\n      }\n      this._end = index;\n      const repeatNumber = Number(maskExp.slice(this._start + 1, this._end));\n      const replaceWith = new Array(repeatNumber + 1).join(maskExp[this._start - 1]);\n      return accum + replaceWith;\n    }, '') || maskExp;\n  }\n  // tslint:disable-next-line:no-any\n  _applyMask() {\n    this._maskService.maskExpression = this._repeatPatternSymbols(this._maskValue || '');\n    this._maskService.formElementProperty = ['value', this._maskService.applyMask(this._inputValue, this._maskService.maskExpression)];\n  }\n  _validateTime(value) {\n    const rowMaskLen = this._maskValue.split('').filter(s => s !== ':').length;\n    if (!value) {\n      return null; // Don't validate empty values to allow for optional form control\n    }\n\n    if (+value[value.length - 1] === 0 && value.length < rowMaskLen || value.length <= rowMaskLen - 2) {\n      return this._createValidationError(value);\n    }\n    return null;\n  }\n  _getActualInputLength() {\n    return this._maskService.actualValue.length || this._maskService.actualValue.length + this._maskService.prefix.length;\n  }\n  _createValidationError(actualValue) {\n    return {\n      mask: {\n        requiredMask: this._maskValue,\n        actualValue\n      }\n    };\n  }\n  _setMask() {\n    if (this._maskExpressionArray.length > 0) {\n      this._maskExpressionArray.some(mask => {\n        var _a, _b;\n        const test = ((_a = this._maskService.removeMask(this._inputValue)) === null || _a === void 0 ? void 0 : _a.length) <= ((_b = this._maskService.removeMask(mask)) === null || _b === void 0 ? void 0 : _b.length);\n        if (this._inputValue && test) {\n          this._maskValue = mask;\n          this.maskExpression = mask;\n          this._maskService.maskExpression = mask;\n          return test;\n        } else {\n          this._maskValue = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n          this.maskExpression = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n          this._maskService.maskExpression = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n        }\n      });\n    }\n  }\n}\nMaskDirective.ɵfac = function MaskDirective_Factory(t) {\n  return new (t || MaskDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(MaskService), ɵngcc0.ɵɵdirectiveInject(config));\n};\nMaskDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n  type: MaskDirective,\n  selectors: [[\"input\", \"mask\", \"\"], [\"textarea\", \"mask\", \"\"]],\n  hostBindings: function MaskDirective_HostBindings(rf, ctx) {\n    if (rf & 1) {\n      ɵngcc0.ɵɵlistener(\"paste\", function MaskDirective_paste_HostBindingHandler() {\n        return ctx.onPaste();\n      })(\"input\", function MaskDirective_input_HostBindingHandler($event) {\n        return ctx.onInput($event);\n      })(\"blur\", function MaskDirective_blur_HostBindingHandler() {\n        return ctx.onBlur();\n      })(\"click\", function MaskDirective_click_HostBindingHandler($event) {\n        return ctx.onFocus($event);\n      })(\"keydown\", function MaskDirective_keydown_HostBindingHandler($event) {\n        return ctx.onKeyDown($event);\n      });\n    }\n  },\n  inputs: {\n    maskExpression: [\"mask\", \"maskExpression\"],\n    specialCharacters: \"specialCharacters\",\n    patterns: \"patterns\",\n    prefix: \"prefix\",\n    suffix: \"suffix\",\n    thousandSeparator: \"thousandSeparator\",\n    decimalMarker: \"decimalMarker\",\n    dropSpecialCharacters: \"dropSpecialCharacters\",\n    hiddenInput: \"hiddenInput\",\n    showMaskTyped: \"showMaskTyped\",\n    placeHolderCharacter: \"placeHolderCharacter\",\n    shownMaskExpression: \"shownMaskExpression\",\n    showTemplate: \"showTemplate\",\n    clearIfNotMatch: \"clearIfNotMatch\",\n    validation: \"validation\",\n    separatorLimit: \"separatorLimit\",\n    allowNegativeNumbers: \"allowNegativeNumbers\",\n    leadZeroDateTime: \"leadZeroDateTime\"\n  },\n  features: [ɵngcc0.ɵɵProvidersFeature([{\n    provide: NG_VALUE_ACCESSOR,\n    useExisting: forwardRef(() => MaskDirective),\n    multi: true\n  }, {\n    provide: NG_VALIDATORS,\n    useExisting: forwardRef(() => MaskDirective),\n    multi: true\n  }, MaskService]), ɵngcc0.ɵɵNgOnChangesFeature]\n});\nMaskDirective.ctorParameters = () => [{\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [DOCUMENT]\n  }]\n}, {\n  type: MaskService\n}, {\n  type: undefined,\n  decorators: [{\n    type: Inject,\n    args: [config]\n  }]\n}];\nMaskDirective.propDecorators = {\n  maskExpression: [{\n    type: Input,\n    args: ['mask']\n  }],\n  specialCharacters: [{\n    type: Input\n  }],\n  patterns: [{\n    type: Input\n  }],\n  prefix: [{\n    type: Input\n  }],\n  suffix: [{\n    type: Input\n  }],\n  thousandSeparator: [{\n    type: Input\n  }],\n  decimalMarker: [{\n    type: Input\n  }],\n  dropSpecialCharacters: [{\n    type: Input\n  }],\n  hiddenInput: [{\n    type: Input\n  }],\n  showMaskTyped: [{\n    type: Input\n  }],\n  placeHolderCharacter: [{\n    type: Input\n  }],\n  shownMaskExpression: [{\n    type: Input\n  }],\n  showTemplate: [{\n    type: Input\n  }],\n  clearIfNotMatch: [{\n    type: Input\n  }],\n  validation: [{\n    type: Input\n  }],\n  separatorLimit: [{\n    type: Input\n  }],\n  allowNegativeNumbers: [{\n    type: Input\n  }],\n  leadZeroDateTime: [{\n    type: Input\n  }],\n  onPaste: [{\n    type: HostListener,\n    args: ['paste']\n  }],\n  onInput: [{\n    type: HostListener,\n    args: ['input', ['$event']]\n  }],\n  onBlur: [{\n    type: HostListener,\n    args: ['blur']\n  }],\n  onFocus: [{\n    type: HostListener,\n    args: ['click', ['$event']]\n  }],\n  onKeyDown: [{\n    type: HostListener,\n    args: ['keydown', ['$event']]\n  }]\n};\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskDirective, [{\n    type: Directive,\n    args: [{\n      selector: 'input[mask], textarea[mask]',\n      providers: [{\n        provide: NG_VALUE_ACCESSOR,\n        useExisting: forwardRef(() => MaskDirective),\n        multi: true\n      }, {\n        provide: NG_VALIDATORS,\n        useExisting: forwardRef(() => MaskDirective),\n        multi: true\n      }, MaskService]\n    }]\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [DOCUMENT]\n      }]\n    }, {\n      type: MaskService\n    }, {\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [config]\n      }]\n    }];\n  }, {\n    maskExpression: [{\n      type: Input,\n      args: ['mask']\n    }],\n    specialCharacters: [{\n      type: Input\n    }],\n    patterns: [{\n      type: Input\n    }],\n    prefix: [{\n      type: Input\n    }],\n    suffix: [{\n      type: Input\n    }],\n    thousandSeparator: [{\n      type: Input\n    }],\n    decimalMarker: [{\n      type: Input\n    }],\n    dropSpecialCharacters: [{\n      type: Input\n    }],\n    hiddenInput: [{\n      type: Input\n    }],\n    showMaskTyped: [{\n      type: Input\n    }],\n    placeHolderCharacter: [{\n      type: Input\n    }],\n    shownMaskExpression: [{\n      type: Input\n    }],\n    showTemplate: [{\n      type: Input\n    }],\n    clearIfNotMatch: [{\n      type: Input\n    }],\n    validation: [{\n      type: Input\n    }],\n    separatorLimit: [{\n      type: Input\n    }],\n    allowNegativeNumbers: [{\n      type: Input\n    }],\n    leadZeroDateTime: [{\n      type: Input\n    }],\n    onPaste: [{\n      type: HostListener,\n      args: ['paste']\n    }],\n    onInput: [{\n      type: HostListener,\n      args: ['input', ['$event']]\n    }],\n    onBlur: [{\n      type: HostListener,\n      args: ['blur']\n    }],\n    onFocus: [{\n      type: HostListener,\n      args: ['click', ['$event']]\n    }],\n    // tslint:disable-next-line: cyclomatic-complexity\n    onKeyDown: [{\n      type: HostListener,\n      args: ['keydown', ['$event']]\n    }]\n  });\n})();\nclass MaskPipe {\n  constructor(_maskService) {\n    this._maskService = _maskService;\n  }\n  transform(value, mask, thousandSeparator = null) {\n    if (!value && typeof value !== 'number') {\n      return '';\n    }\n    if (thousandSeparator) {\n      this._maskService.thousandSeparator = thousandSeparator;\n    }\n    if (typeof mask === 'string') {\n      return this._maskService.applyMask(`${value}`, mask);\n    }\n    return this._maskService.applyMaskWithPattern(`${value}`, mask);\n  }\n}\nMaskPipe.ɵfac = function MaskPipe_Factory(t) {\n  return new (t || MaskPipe)(ɵngcc0.ɵɵdirectiveInject(MaskApplierService, 16));\n};\nMaskPipe.ɵpipe = /*@__PURE__*/ɵngcc0.ɵɵdefinePipe({\n  name: \"mask\",\n  type: MaskPipe,\n  pure: true\n});\nMaskPipe.ctorParameters = () => [{\n  type: MaskApplierService\n}];\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskPipe, [{\n    type: Pipe,\n    args: [{\n      name: 'mask',\n      pure: true\n    }]\n  }], function () {\n    return [{\n      type: MaskApplierService\n    }];\n  }, null);\n})();\nclass NgxMaskModule {\n  static forRoot(configValue) {\n    return {\n      ngModule: NgxMaskModule,\n      providers: [{\n        provide: NEW_CONFIG,\n        useValue: configValue\n      }, {\n        provide: INITIAL_CONFIG,\n        useValue: initialConfig\n      }, {\n        provide: config,\n        useFactory: _configFactory,\n        deps: [INITIAL_CONFIG, NEW_CONFIG]\n      }, MaskApplierService]\n    };\n  }\n  static forChild() {\n    return {\n      ngModule: NgxMaskModule\n    };\n  }\n}\nNgxMaskModule.ɵfac = function NgxMaskModule_Factory(t) {\n  return new (t || NgxMaskModule)();\n};\nNgxMaskModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n  type: NgxMaskModule\n});\nNgxMaskModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgxMaskModule, [{\n    type: NgModule,\n    args: [{\n      exports: [MaskDirective, MaskPipe],\n      declarations: [MaskDirective, MaskPipe]\n    }]\n  }], null, null);\n})();\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgxMaskModule, {\n    declarations: [MaskDirective, MaskPipe],\n    exports: [MaskDirective, MaskPipe]\n  });\n})();\n/**\n * @internal\n */\nfunction _configFactory(initConfig, configValue) {\n  return configValue instanceof Function ? Object.assign(Object.assign({}, initConfig), configValue()) : Object.assign(Object.assign({}, initConfig), configValue);\n}\nconst commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n(function () {\n  if (!commonjsGlobal.KeyboardEvent) {\n    commonjsGlobal.KeyboardEvent = function (_eventType, _init) {};\n  }\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { INITIAL_CONFIG, MaskApplierService, MaskDirective, MaskPipe, MaskService, NEW_CONFIG, NgxMaskModule, _configFactory, config, initialConfig, timeMasks, withoutValidation };","map":{"version":3,"names":["InjectionToken","Injectable","Inject","ElementRef","Renderer2","Directive","forwardRef","Input","HostListener","Pipe","NgModule","__awaiter","NG_VALUE_ACCESSOR","NG_VALIDATORS","DOCUMENT","ɵngcc0","config","NEW_CONFIG","INITIAL_CONFIG","initialConfig","suffix","prefix","thousandSeparator","decimalMarker","clearIfNotMatch","showTemplate","showMaskTyped","placeHolderCharacter","dropSpecialCharacters","hiddenInput","undefined","shownMaskExpression","separatorLimit","allowNegativeNumbers","validation","specialCharacters","leadZeroDateTime","patterns","pattern","RegExp","optional","X","symbol","A","S","d","m","M","H","h","s","timeMasks","withoutValidation","MaskApplierService","constructor","_config","maskExpression","actualValue","_formatWithSeparators","str","thousandSeparatorChar","decimalChar","precision","x","split","decimals","length","res","replace","slice","rgx","test","substr","percentage","Number","getPrecision","Infinity","checkAndRemoveSuffix","inputValue","_a","_b","_c","i","includes","checkInputPrecision","precisionRegEx","_charToRegExpExpression","precisionMatch","match","diff","substring","endsWith","_shift","Set","maskSpecialCharacters","maskAvailablePatterns","applyMaskWithPattern","maskAndPattern","mask","customPattern","applyMask","position","justPasted","backspaced","cb","cursor","result","multi","backspaceShift","shift","stepBack","inputArray","toString","ipError","filter","arr","push","cpfCnpjError","startsWith","_stripToDecimal","indexOf","base","thousandSeperatorCharEscaped","decimalMarkerEscaped","invalidChars","invalidCharRegexp","strForSep","commaShift","shiftStep","add","clear","inputSymbol","_checkSymbolMask","_shiftStep","daysCount","monthsCount","withoutDays","day1monthInput","day2monthInput","day1monthPaste","day2monthPaste","_findSpecialChar","newPosition","has","actualShift","onlySpecial","every","char","find","val","maskSymbol","idx","join","charsToEscape","inputLength","ɵfac","MaskApplierService_Factory","t","ɵɵinject","ɵprov","ɵɵdefineInjectable","token","factory","ctorParameters","type","decorators","args","ngDevMode","ɵsetClassMetadata","MaskService","document","_elementRef","_renderer","isNumberValue","maskIsShown","selStart","selEnd","writingValue","maskChanged","onChange","_","showMaskInInput","formControlResult","getSymbol","newInputValue","actualResult","splice","shiftTypedSymbols","Boolean","getActualValue","item","hideInput","resLen","prefNmask","countSkipedSymbol","_numberSkipedSymbols","value","regex","exec","applyValueChanges","formElement","nativeElement","activeElement","clearIfNotMatchFn","map","curr","index","compare","symbolToReplace","currSymbol","replaceSymbol","inputVal","Error","_checkForIp","_checkForCpfCnpj","formElementProperty","name","Promise","resolve","then","setProperty","checkSpecialCharAmount","chars","removeMask","_removeMask","_removeSuffix","_removePrefix","concat","cpf","cnpj","Array","isArray","_toNumber","_checkSymbols","num","isNaN","specialCharactersForRemove","_regExpForRemove","_retrieveSeparatorValue","separatorPrecision","_retrieveSeparatorPrecision","separatorValue","_checkPrecision","maskExpretion","matcher","separatorExpression","toFixed","MaskService_Factory","MaskDirective","_maskService","_maskValue","_position","_maskExpressionArray","_justPasted","onTouch","ngOnChanges","changes","currentValue","previousValue","firstChange","sort","a","b","c","_applyMask","validate","_createValidationError","_validateTime","counterOfOpt","key","lastIndexOf","opt","onPaste","onInput","e","el","target","_inputValue","_setMask","selectionStart","caretShift","_code","_backspaceShift","positionToApply","_getActualInputLength","setSelectionRange","onBlur","onFocus","posStart","posEnd","selectionEnd","keyCode","focus","nextValue","onKeyDown","code","preventDefault","suffixCheckOnPressDelete","cursorStart","readOnly","ctrlKey","metaKey","writeValue","setDisabledState","disable","String","registerOnChange","fn","registerOnTouched","isDisabled","_repeatPatternSymbols","maskExp","reduce","accum","currval","_start","_end","repeatNumber","replaceWith","rowMaskLen","requiredMask","some","MaskDirective_Factory","ɵɵdirectiveInject","ɵdir","ɵɵdefineDirective","selectors","hostBindings","MaskDirective_HostBindings","rf","ctx","ɵɵlistener","MaskDirective_paste_HostBindingHandler","MaskDirective_input_HostBindingHandler","$event","MaskDirective_blur_HostBindingHandler","MaskDirective_click_HostBindingHandler","MaskDirective_keydown_HostBindingHandler","inputs","features","ɵɵProvidersFeature","provide","useExisting","ɵɵNgOnChangesFeature","propDecorators","selector","providers","MaskPipe","transform","MaskPipe_Factory","ɵpipe","ɵɵdefinePipe","pure","NgxMaskModule","forRoot","configValue","ngModule","useValue","useFactory","_configFactory","deps","forChild","NgxMaskModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","exports","declarations","ngJitMode","ɵɵsetNgModuleScope","initConfig","Function","Object","assign","commonjsGlobal","globalThis","window","global","self","KeyboardEvent","_eventType","_init"],"sources":["C:/Users/kehin/Downloads/section-7-19-COMPLETE/node_modules/ngx-mask/__ivy_ngcc__/fesm2015/ngx-mask.js"],"sourcesContent":["import { InjectionToken, Injectable, Inject, ElementRef, Renderer2, Directive, forwardRef, Input, HostListener, Pipe, NgModule } from '@angular/core';\nimport { __awaiter } from 'tslib';\nimport { NG_VALUE_ACCESSOR, NG_VALIDATORS } from '@angular/forms';\nimport { DOCUMENT } from '@angular/common';\n\nimport * as ɵngcc0 from '@angular/core';\nconst config = new InjectionToken('config');\nconst NEW_CONFIG = new InjectionToken('NEW_CONFIG');\nconst INITIAL_CONFIG = new InjectionToken('INITIAL_CONFIG');\nconst initialConfig = {\n    suffix: '',\n    prefix: '',\n    thousandSeparator: ' ',\n    decimalMarker: '.',\n    clearIfNotMatch: false,\n    showTemplate: false,\n    showMaskTyped: false,\n    placeHolderCharacter: '_',\n    dropSpecialCharacters: true,\n    hiddenInput: undefined,\n    shownMaskExpression: '',\n    separatorLimit: '',\n    allowNegativeNumbers: false,\n    validation: true,\n    // tslint:disable-next-line: quotemark\n    specialCharacters: ['-', '/', '(', ')', '.', ':', ' ', '+', ',', '@', '[', ']', '\"', \"'\"],\n    leadZeroDateTime: false,\n    patterns: {\n        '0': {\n            pattern: new RegExp('\\\\d'),\n        },\n        '9': {\n            pattern: new RegExp('\\\\d'),\n            optional: true,\n        },\n        X: {\n            pattern: new RegExp('\\\\d'),\n            symbol: '*',\n        },\n        A: {\n            pattern: new RegExp('[a-zA-Z0-9]'),\n        },\n        S: {\n            pattern: new RegExp('[a-zA-Z]'),\n        },\n        d: {\n            pattern: new RegExp('\\\\d'),\n        },\n        m: {\n            pattern: new RegExp('\\\\d'),\n        },\n        M: {\n            pattern: new RegExp('\\\\d'),\n        },\n        H: {\n            pattern: new RegExp('\\\\d'),\n        },\n        h: {\n            pattern: new RegExp('\\\\d'),\n        },\n        s: {\n            pattern: new RegExp('\\\\d'),\n        },\n    },\n};\nconst timeMasks = ['Hh:m0:s0', 'Hh:m0', 'm0:s0'];\nconst withoutValidation = [\n    'percent',\n    'Hh',\n    's0',\n    'm0',\n    'separator',\n    'd0/M0/0000',\n    'd0/M0',\n    'd0',\n    'M0',\n];\n\nclass MaskApplierService {\n    constructor(_config) {\n        this._config = _config;\n        this.maskExpression = '';\n        this.actualValue = '';\n        this.shownMaskExpression = '';\n        this._formatWithSeparators = (str, thousandSeparatorChar, decimalChar, precision) => {\n            const x = str.split(decimalChar);\n            const decimals = x.length > 1 ? `${decimalChar}${x[1]}` : '';\n            let res = x[0];\n            const separatorLimit = this.separatorLimit.replace(/\\s/g, '');\n            if (separatorLimit && +separatorLimit) {\n                if (res[0] === '-') {\n                    res = `-${res.slice(1, res.length).slice(0, separatorLimit.length)}`;\n                }\n                else {\n                    res = res.slice(0, separatorLimit.length);\n                }\n            }\n            const rgx = /(\\d+)(\\d{3})/;\n            while (thousandSeparatorChar && rgx.test(res)) {\n                res = res.replace(rgx, '$1' + thousandSeparatorChar + '$2');\n            }\n            if (precision === undefined) {\n                return res + decimals;\n            }\n            else if (precision === 0) {\n                return res;\n            }\n            return res + decimals.substr(0, precision + 1);\n        };\n        this.percentage = (str) => {\n            return Number(str) >= 0 && Number(str) <= 100;\n        };\n        this.getPrecision = (maskExpression) => {\n            const x = maskExpression.split('.');\n            if (x.length > 1) {\n                return Number(x[x.length - 1]);\n            }\n            return Infinity;\n        };\n        this.checkAndRemoveSuffix = (inputValue) => {\n            var _a, _b, _c;\n            for (let i = ((_a = this.suffix) === null || _a === void 0 ? void 0 : _a.length) - 1; i >= 0; i--) {\n                const substr = this.suffix.substr(i, (_b = this.suffix) === null || _b === void 0 ? void 0 : _b.length);\n                if (inputValue.includes(substr) &&\n                    (i - 1 < 0 || !inputValue.includes(this.suffix.substr(i - 1, (_c = this.suffix) === null || _c === void 0 ? void 0 : _c.length)))) {\n                    return inputValue.replace(substr, '');\n                }\n            }\n            return inputValue;\n        };\n        this.checkInputPrecision = (inputValue, precision, decimalMarker) => {\n            if (precision < Infinity) {\n                const precisionRegEx = new RegExp(this._charToRegExpExpression(decimalMarker) + `\\\\d{${precision}}.*$`);\n                const precisionMatch = inputValue.match(precisionRegEx);\n                if (precisionMatch && precisionMatch[0].length - 1 > precision) {\n                    const diff = precisionMatch[0].length - 1 - precision;\n                    inputValue = inputValue.substring(0, inputValue.length - diff);\n                }\n                if (precision === 0 && inputValue.endsWith(decimalMarker)) {\n                    inputValue = inputValue.substring(0, inputValue.length - 1);\n                }\n            }\n            return inputValue;\n        };\n        this._shift = new Set();\n        this.clearIfNotMatch = this._config.clearIfNotMatch;\n        this.dropSpecialCharacters = this._config.dropSpecialCharacters;\n        this.maskSpecialCharacters = this._config.specialCharacters;\n        this.maskAvailablePatterns = this._config.patterns;\n        this.prefix = this._config.prefix;\n        this.suffix = this._config.suffix;\n        this.thousandSeparator = this._config.thousandSeparator;\n        this.decimalMarker = this._config.decimalMarker;\n        this.hiddenInput = this._config.hiddenInput;\n        this.showMaskTyped = this._config.showMaskTyped;\n        this.placeHolderCharacter = this._config.placeHolderCharacter;\n        this.validation = this._config.validation;\n        this.separatorLimit = this._config.separatorLimit;\n        this.allowNegativeNumbers = this._config.allowNegativeNumbers;\n        this.leadZeroDateTime = this._config.leadZeroDateTime;\n    }\n    applyMaskWithPattern(inputValue, maskAndPattern) {\n        const [mask, customPattern] = maskAndPattern;\n        this.customPattern = customPattern;\n        return this.applyMask(inputValue, mask);\n    }\n    applyMask(inputValue, maskExpression, position = 0, justPasted = false, backspaced = false, cb = () => { }) {\n        if (inputValue === undefined || inputValue === null || maskExpression === undefined) {\n            return '';\n        }\n        let cursor = 0;\n        let result = '';\n        let multi = false;\n        let backspaceShift = false;\n        let shift = 1;\n        let stepBack = false;\n        if (inputValue.slice(0, this.prefix.length) === this.prefix) {\n            inputValue = inputValue.slice(this.prefix.length, inputValue.length);\n        }\n        if (!!this.suffix && (inputValue === null || inputValue === void 0 ? void 0 : inputValue.length) > 0) {\n            inputValue = this.checkAndRemoveSuffix(inputValue);\n        }\n        const inputArray = inputValue.toString().split('');\n        if (maskExpression === 'IP') {\n            this.ipError = !!(inputArray.filter((i) => i === '.').length < 3 && inputArray.length < 7);\n            maskExpression = '099.099.099.099';\n        }\n        const arr = [];\n        for (let i = 0; i < inputValue.length; i++) {\n            if (inputValue[i].match('\\\\d')) {\n                arr.push(inputValue[i]);\n            }\n        }\n        if (maskExpression === 'CPF_CNPJ') {\n            this.cpfCnpjError = !!(arr.length !== 11 && arr.length !== 14);\n            if (arr.length > 11) {\n                maskExpression = '00.000.000/0000-00';\n            }\n            else {\n                maskExpression = '000.000.000-00';\n            }\n        }\n        if (maskExpression.startsWith('percent')) {\n            if (inputValue.match('[a-z]|[A-Z]') || inputValue.match(/[-!$%^&*()_+|~=`{}\\[\\]:\";'<>?,\\/.]/)) {\n                inputValue = this._stripToDecimal(inputValue);\n                const precision = this.getPrecision(maskExpression);\n                inputValue = this.checkInputPrecision(inputValue, precision, this.decimalMarker);\n            }\n            if (inputValue.indexOf('.') > 0 && !this.percentage(inputValue.substring(0, inputValue.indexOf('.')))) {\n                const base = inputValue.substring(0, inputValue.indexOf('.') - 1);\n                inputValue = `${base}${inputValue.substring(inputValue.indexOf('.'), inputValue.length)}`;\n            }\n            if (this.percentage(inputValue)) {\n                result = inputValue;\n            }\n            else {\n                result = inputValue.substring(0, inputValue.length - 1);\n            }\n        }\n        else if (maskExpression.startsWith('separator')) {\n            if (inputValue.match('[wа-яА-Я]') ||\n                inputValue.match('[ЁёА-я]') ||\n                inputValue.match('[a-z]|[A-Z]') ||\n                inputValue.match(/[-@#!$%\\\\^&*()_£¬'+|~=`{}\\[\\]:\";<>.?\\/]/) ||\n                inputValue.match('[^A-Za-z0-9,]')) {\n                inputValue = this._stripToDecimal(inputValue);\n            }\n            inputValue =\n                inputValue.length > 1 && inputValue[0] === '0' && inputValue[1] !== this.decimalMarker && !backspaced\n                    ? inputValue.slice(1, inputValue.length)\n                    : inputValue;\n            // TODO: we had different rexexps here for the different cases... but tests dont seam to bother - check this\n            //  separator: no COMMA, dot-sep: no SPACE, COMMA OK, comma-sep: no SPACE, COMMA OK\n            const thousandSeperatorCharEscaped = this._charToRegExpExpression(this.thousandSeparator);\n            const decimalMarkerEscaped = this._charToRegExpExpression(this.decimalMarker);\n            const invalidChars = '@#!$%^&*()_+|~=`{}\\\\[\\\\]:\\\\s,\\\\.\";<>?\\\\/'\n                .replace(thousandSeperatorCharEscaped, '')\n                .replace(decimalMarkerEscaped, '');\n            const invalidCharRegexp = new RegExp('[' + invalidChars + ']');\n            if (inputValue.match(invalidCharRegexp)) {\n                inputValue = inputValue.substring(0, inputValue.length - 1);\n            }\n            const precision = this.getPrecision(maskExpression);\n            inputValue = this.checkInputPrecision(inputValue, precision, this.decimalMarker);\n            const strForSep = inputValue.replace(new RegExp(thousandSeperatorCharEscaped, 'g'), '');\n            result = this._formatWithSeparators(strForSep, this.thousandSeparator, this.decimalMarker, precision);\n            const commaShift = result.indexOf(',') - inputValue.indexOf(',');\n            const shiftStep = result.length - inputValue.length;\n            if (shiftStep > 0 && result[position] !== ',') {\n                backspaceShift = true;\n                let _shift = 0;\n                do {\n                    this._shift.add(position + _shift);\n                    _shift++;\n                } while (_shift < shiftStep);\n            }\n            else if ((commaShift !== 0 && position > 0 && !(result.indexOf(',') >= position && position > 3)) ||\n                (!(result.indexOf('.') >= position && position > 3) && shiftStep <= 0)) {\n                this._shift.clear();\n                backspaceShift = true;\n                shift = shiftStep;\n                position += shiftStep;\n                this._shift.add(position);\n            }\n            else {\n                this._shift.clear();\n            }\n        }\n        else {\n            for (\n            // tslint:disable-next-line\n            let i = 0, inputSymbol = inputArray[0]; i < inputArray.length; i++, inputSymbol = inputArray[i]) {\n                if (cursor === maskExpression.length) {\n                    break;\n                }\n                if (this._checkSymbolMask(inputSymbol, maskExpression[cursor]) && maskExpression[cursor + 1] === '?') {\n                    result += inputSymbol;\n                    cursor += 2;\n                }\n                else if (maskExpression[cursor + 1] === '*' &&\n                    multi &&\n                    this._checkSymbolMask(inputSymbol, maskExpression[cursor + 2])) {\n                    result += inputSymbol;\n                    cursor += 3;\n                    multi = false;\n                }\n                else if (this._checkSymbolMask(inputSymbol, maskExpression[cursor]) && maskExpression[cursor + 1] === '*') {\n                    result += inputSymbol;\n                    multi = true;\n                }\n                else if (maskExpression[cursor + 1] === '?' &&\n                    this._checkSymbolMask(inputSymbol, maskExpression[cursor + 2])) {\n                    result += inputSymbol;\n                    cursor += 3;\n                }\n                else if (this._checkSymbolMask(inputSymbol, maskExpression[cursor])) {\n                    if (maskExpression[cursor] === 'H') {\n                        if (Number(inputSymbol) > 2) {\n                            cursor += 1;\n                            this._shiftStep(maskExpression, cursor, inputArray.length);\n                            i--;\n                            if (this.leadZeroDateTime) {\n                                result += '0';\n                            }\n                            continue;\n                        }\n                    }\n                    if (maskExpression[cursor] === 'h') {\n                        if (result === '2' && Number(inputSymbol) > 3) {\n                            cursor += 1;\n                            i--;\n                            continue;\n                        }\n                    }\n                    if (maskExpression[cursor] === 'm') {\n                        if (Number(inputSymbol) > 5) {\n                            cursor += 1;\n                            this._shiftStep(maskExpression, cursor, inputArray.length);\n                            i--;\n                            if (this.leadZeroDateTime) {\n                                result += '0';\n                            }\n                            continue;\n                        }\n                    }\n                    if (maskExpression[cursor] === 's') {\n                        if (Number(inputSymbol) > 5) {\n                            cursor += 1;\n                            this._shiftStep(maskExpression, cursor, inputArray.length);\n                            i--;\n                            if (this.leadZeroDateTime) {\n                                result += '0';\n                            }\n                            continue;\n                        }\n                    }\n                    const daysCount = 31;\n                    if (maskExpression[cursor] === 'd') {\n                        if ((Number(inputSymbol) > 3 && this.leadZeroDateTime) ||\n                            Number(inputValue.slice(cursor, cursor + 2)) > daysCount ||\n                            inputValue[cursor + 1] === '/') {\n                            cursor += 1;\n                            this._shiftStep(maskExpression, cursor, inputArray.length);\n                            i--;\n                            if (this.leadZeroDateTime) {\n                                result += '0';\n                            }\n                            continue;\n                        }\n                    }\n                    if (maskExpression[cursor] === 'M') {\n                        const monthsCount = 12;\n                        // mask without day\n                        const withoutDays = cursor === 0 &&\n                            (Number(inputSymbol) > 2 ||\n                                Number(inputValue.slice(cursor, cursor + 2)) > monthsCount ||\n                                inputValue[cursor + 1] === '/');\n                        // day<10 && month<12 for input\n                        const day1monthInput = inputValue.slice(cursor - 3, cursor - 1).includes('/') &&\n                            ((inputValue[cursor - 2] === '/' &&\n                                Number(inputValue.slice(cursor - 1, cursor + 1)) > monthsCount &&\n                                inputValue[cursor] !== '/') ||\n                                inputValue[cursor] === '/' ||\n                                (inputValue[cursor - 3] === '/' &&\n                                    Number(inputValue.slice(cursor - 2, cursor)) > monthsCount &&\n                                    inputValue[cursor - 1] !== '/') ||\n                                inputValue[cursor - 1] === '/');\n                        // 10<day<31 && month<12 for input\n                        const day2monthInput = Number(inputValue.slice(cursor - 3, cursor - 1)) <= daysCount &&\n                            !inputValue.slice(cursor - 3, cursor - 1).includes('/') &&\n                            inputValue[cursor - 1] === '/' &&\n                            (Number(inputValue.slice(cursor, cursor + 2)) > monthsCount || inputValue[cursor + 1] === '/');\n                        // day<10 && month<12 for paste whole data\n                        const day1monthPaste = Number(inputValue.slice(cursor - 3, cursor - 1)) > daysCount &&\n                            !inputValue.slice(cursor - 3, cursor - 1).includes('/') &&\n                            !inputValue.slice(cursor - 2, cursor).includes('/') &&\n                            Number(inputValue.slice(cursor - 2, cursor)) > monthsCount;\n                        // 10<day<31 && month<12 for paste whole data\n                        const day2monthPaste = Number(inputValue.slice(cursor - 3, cursor - 1)) <= daysCount &&\n                            !inputValue.slice(cursor - 3, cursor - 1).includes('/') &&\n                            inputValue[cursor - 1] !== '/' &&\n                            Number(inputValue.slice(cursor - 1, cursor + 1)) > monthsCount;\n                        if ((Number(inputSymbol) > 1 && this.leadZeroDateTime) ||\n                            withoutDays ||\n                            day1monthInput ||\n                            day2monthInput ||\n                            day1monthPaste ||\n                            day2monthPaste) {\n                            cursor += 1;\n                            this._shiftStep(maskExpression, cursor, inputArray.length);\n                            i--;\n                            if (this.leadZeroDateTime) {\n                                result += '0';\n                            }\n                            continue;\n                        }\n                    }\n                    result += inputSymbol;\n                    cursor++;\n                }\n                else if (this.maskSpecialCharacters.indexOf(maskExpression[cursor]) !== -1) {\n                    result += maskExpression[cursor];\n                    cursor++;\n                    this._shiftStep(maskExpression, cursor, inputArray.length);\n                    i--;\n                }\n                else if (this.maskSpecialCharacters.indexOf(inputSymbol) > -1 &&\n                    this.maskAvailablePatterns[maskExpression[cursor]] &&\n                    this.maskAvailablePatterns[maskExpression[cursor]].optional) {\n                    if (!!inputArray[cursor] &&\n                        maskExpression !== '099.099.099.099' &&\n                        maskExpression !== '000.000.000-00' &&\n                        maskExpression !== '00.000.000/0000-00') {\n                        result += inputArray[cursor];\n                    }\n                    cursor++;\n                    i--;\n                }\n                else if (this.maskExpression[cursor + 1] === '*' &&\n                    this._findSpecialChar(this.maskExpression[cursor + 2]) &&\n                    this._findSpecialChar(inputSymbol) === this.maskExpression[cursor + 2] &&\n                    multi) {\n                    cursor += 3;\n                    result += inputSymbol;\n                }\n                else if (this.maskExpression[cursor + 1] === '?' &&\n                    this._findSpecialChar(this.maskExpression[cursor + 2]) &&\n                    this._findSpecialChar(inputSymbol) === this.maskExpression[cursor + 2] &&\n                    multi) {\n                    cursor += 3;\n                    result += inputSymbol;\n                }\n                else if (this.showMaskTyped &&\n                    this.maskSpecialCharacters.indexOf(inputSymbol) < 0 &&\n                    inputSymbol !== this.placeHolderCharacter) {\n                    stepBack = true;\n                }\n            }\n        }\n        if (result.length + 1 === maskExpression.length &&\n            this.maskSpecialCharacters.indexOf(maskExpression[maskExpression.length - 1]) !== -1) {\n            result += maskExpression[maskExpression.length - 1];\n        }\n        let newPosition = position + 1;\n        while (this._shift.has(newPosition)) {\n            shift++;\n            newPosition++;\n        }\n        let actualShift = justPasted ? cursor : this._shift.has(position) ? shift : 0;\n        if (stepBack) {\n            actualShift--;\n        }\n        cb(actualShift, backspaceShift);\n        if (shift < 0) {\n            this._shift.clear();\n        }\n        let onlySpecial = false;\n        if (backspaced) {\n            onlySpecial = inputArray.every((char) => this.maskSpecialCharacters.includes(char));\n        }\n        let res = `${this.prefix}${onlySpecial ? '' : result}${this.suffix}`;\n        if (result.length === 0) {\n            res = `${this.prefix}${result}`;\n        }\n        return res;\n    }\n    _findSpecialChar(inputSymbol) {\n        return this.maskSpecialCharacters.find((val) => val === inputSymbol);\n    }\n    _checkSymbolMask(inputSymbol, maskSymbol) {\n        this.maskAvailablePatterns = this.customPattern ? this.customPattern : this.maskAvailablePatterns;\n        return (this.maskAvailablePatterns[maskSymbol] &&\n            this.maskAvailablePatterns[maskSymbol].pattern &&\n            this.maskAvailablePatterns[maskSymbol].pattern.test(inputSymbol));\n    }\n    _stripToDecimal(str) {\n        return str\n            .split('')\n            .filter((i, idx) => {\n            return (i.match('^-?\\\\d') ||\n                i.match('\\\\s') ||\n                i === '.' ||\n                i === ',' ||\n                (i === '-' && idx === 0 && this.allowNegativeNumbers));\n        })\n            .join('');\n    }\n    _charToRegExpExpression(char) {\n        if (char) {\n            const charsToEscape = '[\\\\^$.|?*+()';\n            return char === ' ' ? '\\\\s' : charsToEscape.indexOf(char) >= 0 ? '\\\\' + char : char;\n        }\n        return char;\n    }\n    _shiftStep(maskExpression, cursor, inputLength) {\n        const shiftStep = /[*?]/g.test(maskExpression.slice(0, cursor)) ? inputLength : cursor;\n        this._shift.add(shiftStep + this.prefix.length || 0);\n    }\n}\nMaskApplierService.ɵfac = function MaskApplierService_Factory(t) { return new (t || MaskApplierService)(ɵngcc0.ɵɵinject(config)); };\nMaskApplierService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: MaskApplierService, factory: MaskApplierService.ɵfac });\nMaskApplierService.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [config,] }] }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskApplierService, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [config]\n            }] }]; }, null); })();\n\nclass MaskService extends MaskApplierService {\n    constructor(document, _config, _elementRef, _renderer) {\n        super(_config);\n        this.document = document;\n        this._config = _config;\n        this._elementRef = _elementRef;\n        this._renderer = _renderer;\n        this.maskExpression = '';\n        this.isNumberValue = false;\n        this.placeHolderCharacter = '_';\n        this.maskIsShown = '';\n        this.selStart = null;\n        this.selEnd = null;\n        /**\n         * Whether we are currently in writeValue function, in this case when applying the mask we don't want to trigger onChange function,\n         * since writeValue should be a one way only process of writing the DOM value based on the Angular model value.\n         */\n        this.writingValue = false;\n        this.maskChanged = false;\n        this.onChange = (_) => { };\n    }\n    // tslint:disable-next-line:cyclomatic-complexity\n    applyMask(inputValue, maskExpression, position = 0, justPasted = false, backspaced = false, cb = () => { }) {\n        if (!maskExpression) {\n            return inputValue;\n        }\n        this.maskIsShown = this.showMaskTyped ? this.showMaskInInput() : '';\n        if (this.maskExpression === 'IP' && this.showMaskTyped) {\n            this.maskIsShown = this.showMaskInInput(inputValue || '#');\n        }\n        if (this.maskExpression === 'CPF_CNPJ' && this.showMaskTyped) {\n            this.maskIsShown = this.showMaskInInput(inputValue || '#');\n        }\n        if (!inputValue && this.showMaskTyped) {\n            this.formControlResult(this.prefix);\n            return this.prefix + this.maskIsShown;\n        }\n        const getSymbol = !!inputValue && typeof this.selStart === 'number' ? inputValue[this.selStart] : '';\n        let newInputValue = '';\n        if (this.hiddenInput && !this.writingValue) {\n            let actualResult = this.actualValue.split('');\n            // tslint:disable no-unused-expression\n            inputValue !== '' && actualResult.length\n                ? typeof this.selStart === 'number' && typeof this.selEnd === 'number'\n                    ? inputValue.length > actualResult.length\n                        ? actualResult.splice(this.selStart, 0, getSymbol)\n                        : inputValue.length < actualResult.length\n                            ? actualResult.length - inputValue.length === 1\n                                ? actualResult.splice(this.selStart - 1, 1)\n                                : actualResult.splice(this.selStart, this.selEnd - this.selStart)\n                            : null\n                    : null\n                : (actualResult = []);\n            // tslint:enable no-unused-expression\n            newInputValue =\n                this.actualValue.length && actualResult.length <= inputValue.length\n                    ? this.shiftTypedSymbols(actualResult.join(''))\n                    : inputValue;\n        }\n        newInputValue = Boolean(newInputValue) && newInputValue.length ? newInputValue : inputValue;\n        const result = super.applyMask(newInputValue, maskExpression, position, justPasted, backspaced, cb);\n        this.actualValue = this.getActualValue(result);\n        // handle some separator implications:\n        // a.) adjust decimalMarker default (. -> ,) if thousandSeparator is a dot\n        if (this.thousandSeparator === '.' && this.decimalMarker === '.') {\n            this.decimalMarker = ',';\n        }\n        // b) remove decimal marker from list of special characters to mask\n        if (this.maskExpression.startsWith('separator') && this.dropSpecialCharacters === true) {\n            this.maskSpecialCharacters = this.maskSpecialCharacters.filter((item) => item !== this.decimalMarker);\n        }\n        this.formControlResult(result);\n        if (!this.showMaskTyped) {\n            if (this.hiddenInput) {\n                return result && result.length ? this.hideInput(result, this.maskExpression) : result;\n            }\n            return result;\n        }\n        const resLen = result.length;\n        const prefNmask = this.prefix + this.maskIsShown;\n        if (this.maskExpression.includes('H')) {\n            const countSkipedSymbol = this._numberSkipedSymbols(result);\n            return result + prefNmask.slice(resLen + countSkipedSymbol);\n        }\n        else if (this.maskExpression === 'IP' || this.maskExpression === 'CPF_CNPJ') {\n            return result + prefNmask;\n        }\n        return result + prefNmask.slice(resLen);\n    }\n    // get the number of characters that were shifted\n    _numberSkipedSymbols(value) {\n        const regex = /(^|\\D)(\\d\\D)/g;\n        let match = regex.exec(value);\n        let countSkipedSymbol = 0;\n        while (match != null) {\n            countSkipedSymbol += 1;\n            match = regex.exec(value);\n        }\n        return countSkipedSymbol;\n    }\n    applyValueChanges(position = 0, justPasted, backspaced, cb = () => { }) {\n        const formElement = this._elementRef.nativeElement;\n        formElement.value = this.applyMask(formElement.value, this.maskExpression, position, justPasted, backspaced, cb);\n        if (formElement === this.document.activeElement) {\n            return;\n        }\n        this.clearIfNotMatchFn();\n    }\n    hideInput(inputValue, maskExpression) {\n        return inputValue\n            .split('')\n            .map((curr, index) => {\n            if (this.maskAvailablePatterns &&\n                this.maskAvailablePatterns[maskExpression[index]] &&\n                this.maskAvailablePatterns[maskExpression[index]].symbol) {\n                return this.maskAvailablePatterns[maskExpression[index]].symbol;\n            }\n            return curr;\n        })\n            .join('');\n    }\n    // this function is not necessary, it checks result against maskExpression\n    getActualValue(res) {\n        const compare = res\n            .split('')\n            .filter((symbol, i) => this._checkSymbolMask(symbol, this.maskExpression[i]) ||\n            (this.maskSpecialCharacters.includes(this.maskExpression[i]) && symbol === this.maskExpression[i]));\n        if (compare.join('') === res) {\n            return compare.join('');\n        }\n        return res;\n    }\n    shiftTypedSymbols(inputValue) {\n        let symbolToReplace = '';\n        const newInputValue = (inputValue &&\n            inputValue.split('').map((currSymbol, index) => {\n                if (this.maskSpecialCharacters.includes(inputValue[index + 1]) &&\n                    inputValue[index + 1] !== this.maskExpression[index + 1]) {\n                    symbolToReplace = currSymbol;\n                    return inputValue[index + 1];\n                }\n                if (symbolToReplace.length) {\n                    const replaceSymbol = symbolToReplace;\n                    symbolToReplace = '';\n                    return replaceSymbol;\n                }\n                return currSymbol;\n            })) ||\n            [];\n        return newInputValue.join('');\n    }\n    showMaskInInput(inputVal) {\n        if (this.showMaskTyped && !!this.shownMaskExpression) {\n            if (this.maskExpression.length !== this.shownMaskExpression.length) {\n                throw new Error('Mask expression must match mask placeholder length');\n            }\n            else {\n                return this.shownMaskExpression;\n            }\n        }\n        else if (this.showMaskTyped) {\n            if (inputVal) {\n                if (this.maskExpression === 'IP') {\n                    return this._checkForIp(inputVal);\n                }\n                if (this.maskExpression === 'CPF_CNPJ') {\n                    return this._checkForCpfCnpj(inputVal);\n                }\n            }\n            return this.maskExpression.replace(/\\w/g, this.placeHolderCharacter);\n        }\n        return '';\n    }\n    clearIfNotMatchFn() {\n        const formElement = this._elementRef.nativeElement;\n        if (this.clearIfNotMatch &&\n            this.prefix.length + this.maskExpression.length + this.suffix.length !==\n                formElement.value.replace(/_/g, '').length) {\n            this.formElementProperty = ['value', ''];\n            this.applyMask(formElement.value, this.maskExpression);\n        }\n    }\n    set formElementProperty([name, value]) {\n        Promise.resolve().then(() => this._renderer.setProperty(this._elementRef.nativeElement, name, value));\n    }\n    checkSpecialCharAmount(mask) {\n        const chars = mask.split('').filter((item) => this._findSpecialChar(item));\n        return chars.length;\n    }\n    removeMask(inputValue) {\n        return this._removeMask(this._removeSuffix(this._removePrefix(inputValue)), this.maskSpecialCharacters.concat('_').concat(this.placeHolderCharacter));\n    }\n    _checkForIp(inputVal) {\n        if (inputVal === '#') {\n            return `${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n        }\n        const arr = [];\n        for (let i = 0; i < inputVal.length; i++) {\n            if (inputVal[i].match('\\\\d')) {\n                arr.push(inputVal[i]);\n            }\n        }\n        if (arr.length <= 3) {\n            return `${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n        }\n        if (arr.length > 3 && arr.length <= 6) {\n            return `${this.placeHolderCharacter}.${this.placeHolderCharacter}`;\n        }\n        if (arr.length > 6 && arr.length <= 9) {\n            return this.placeHolderCharacter;\n        }\n        if (arr.length > 9 && arr.length <= 12) {\n            return '';\n        }\n        return '';\n    }\n    _checkForCpfCnpj(inputVal) {\n        const cpf = `${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `-${this.placeHolderCharacter}${this.placeHolderCharacter}`;\n        const cnpj = `${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}` +\n            `-${this.placeHolderCharacter}${this.placeHolderCharacter}`;\n        if (inputVal === '#') {\n            return cpf;\n        }\n        const arr = [];\n        for (let i = 0; i < inputVal.length; i++) {\n            if (inputVal[i].match('\\\\d')) {\n                arr.push(inputVal[i]);\n            }\n        }\n        if (arr.length <= 3) {\n            return cpf.slice(arr.length, cpf.length);\n        }\n        if (arr.length > 3 && arr.length <= 6) {\n            return cpf.slice(arr.length + 1, cpf.length);\n        }\n        if (arr.length > 6 && arr.length <= 9) {\n            return cpf.slice(arr.length + 2, cpf.length);\n        }\n        if (arr.length > 9 && arr.length < 11) {\n            return cpf.slice(arr.length + 3, cpf.length);\n        }\n        if (arr.length === 11) {\n            return '';\n        }\n        if (arr.length === 12) {\n            if (inputVal.length === 17) {\n                return cnpj.slice(16, cnpj.length);\n            }\n            return cnpj.slice(15, cnpj.length);\n        }\n        if (arr.length > 12 && arr.length <= 14) {\n            return cnpj.slice(arr.length + 4, cnpj.length);\n        }\n        return '';\n    }\n    /**\n     * Propogates the input value back to the Angular model by triggering the onChange function. It won't do this if writingValue\n     * is true. If that is true it means we are currently in the writeValue function, which is supposed to only update the actual\n     * DOM element based on the Angular model value. It should be a one way process, i.e. writeValue should not be modifying the Angular\n     * model value too. Therefore, we don't trigger onChange in this scenario.\n     * @param inputValue the current form input value\n     */\n    formControlResult(inputValue) {\n        if (this.writingValue || this.maskChanged) {\n            this.maskChanged = false;\n            return;\n        }\n        if (Array.isArray(this.dropSpecialCharacters)) {\n            this.onChange(this._toNumber(this._removeMask(this._removeSuffix(this._removePrefix(inputValue)), this.dropSpecialCharacters)));\n        }\n        else if (this.dropSpecialCharacters) {\n            this.onChange(this._toNumber(this._checkSymbols(inputValue)));\n        }\n        else {\n            this.onChange(this._removeSuffix(inputValue));\n        }\n    }\n    _toNumber(value) {\n        if (!this.isNumberValue || value === '') {\n            return value;\n        }\n        const num = Number(value);\n        return Number.isNaN(num) ? value : num;\n    }\n    _removeMask(value, specialCharactersForRemove) {\n        return value ? value.replace(this._regExpForRemove(specialCharactersForRemove), '') : value;\n    }\n    _removePrefix(value) {\n        if (!this.prefix) {\n            return value;\n        }\n        return value ? value.replace(this.prefix, '') : value;\n    }\n    _removeSuffix(value) {\n        if (!this.suffix) {\n            return value;\n        }\n        return value ? value.replace(this.suffix, '') : value;\n    }\n    _retrieveSeparatorValue(result) {\n        return this._removeMask(this._removeSuffix(this._removePrefix(result)), this.maskSpecialCharacters);\n    }\n    _regExpForRemove(specialCharactersForRemove) {\n        return new RegExp(specialCharactersForRemove.map((item) => `\\\\${item}`).join('|'), 'gi');\n    }\n    _checkSymbols(result) {\n        if (result === '') {\n            return result;\n        }\n        const separatorPrecision = this._retrieveSeparatorPrecision(this.maskExpression);\n        let separatorValue = this._retrieveSeparatorValue(result);\n        if (this.decimalMarker !== '.') {\n            separatorValue = separatorValue.replace(this.decimalMarker, '.');\n        }\n        if (!this.isNumberValue) {\n            return separatorValue;\n        }\n        if (separatorPrecision) {\n            if (result === this.decimalMarker) {\n                return null;\n            }\n            return this._checkPrecision(this.maskExpression, separatorValue);\n        }\n        else {\n            return Number(separatorValue);\n        }\n    }\n    // TODO should think about helpers or separting decimal precision to own property\n    _retrieveSeparatorPrecision(maskExpretion) {\n        const matcher = maskExpretion.match(new RegExp(`^separator\\\\.([^d]*)`));\n        return matcher ? Number(matcher[1]) : null;\n    }\n    _checkPrecision(separatorExpression, separatorValue) {\n        if (separatorExpression.indexOf('2') > 0) {\n            return Number(separatorValue).toFixed(2);\n        }\n        return Number(separatorValue);\n    }\n}\nMaskService.ɵfac = function MaskService_Factory(t) { return new (t || MaskService)(ɵngcc0.ɵɵinject(DOCUMENT), ɵngcc0.ɵɵinject(config), ɵngcc0.ɵɵinject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinject(ɵngcc0.Renderer2)); };\nMaskService.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: MaskService, factory: MaskService.ɵfac });\nMaskService.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: undefined, decorators: [{ type: Inject, args: [config,] }] },\n    { type: ElementRef },\n    { type: Renderer2 }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskService, [{\n        type: Injectable\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [config]\n            }] }, { type: ɵngcc0.ElementRef }, { type: ɵngcc0.Renderer2 }]; }, null); })();\n\n// tslint:disable deprecation\n// tslint:disable no-input-rename\nclass MaskDirective {\n    constructor(document, _maskService, _config) {\n        this.document = document;\n        this._maskService = _maskService;\n        this._config = _config;\n        this.maskExpression = '';\n        this.specialCharacters = [];\n        this.patterns = {};\n        this.prefix = '';\n        this.suffix = '';\n        this.thousandSeparator = ' ';\n        this.decimalMarker = '.';\n        this.dropSpecialCharacters = null;\n        this.hiddenInput = null;\n        this.showMaskTyped = null;\n        this.placeHolderCharacter = null;\n        this.shownMaskExpression = null;\n        this.showTemplate = null;\n        this.clearIfNotMatch = null;\n        this.validation = null;\n        this.separatorLimit = null;\n        this.allowNegativeNumbers = null;\n        this.leadZeroDateTime = null;\n        this._maskValue = '';\n        this._position = null;\n        this._maskExpressionArray = [];\n        this._justPasted = false;\n        this.onChange = (_) => { };\n        this.onTouch = () => { };\n    }\n    ngOnChanges(changes) {\n        const { maskExpression, specialCharacters, patterns, prefix, suffix, thousandSeparator, decimalMarker, dropSpecialCharacters, hiddenInput, showMaskTyped, placeHolderCharacter, shownMaskExpression, showTemplate, clearIfNotMatch, validation, separatorLimit, allowNegativeNumbers, leadZeroDateTime, } = changes;\n        if (maskExpression) {\n            if (maskExpression.currentValue !== maskExpression.previousValue && !maskExpression.firstChange) {\n                this._maskService.maskChanged = true;\n            }\n            this._maskValue = maskExpression.currentValue || '';\n            if (maskExpression.currentValue && maskExpression.currentValue.split('||').length > 1) {\n                this._maskExpressionArray = maskExpression.currentValue.split('||').sort((a, b) => {\n                    return a.length - b.length;\n                });\n                this._maskValue = this._maskExpressionArray[0];\n                this.maskExpression = this._maskExpressionArray[0];\n                this._maskService.maskExpression = this._maskExpressionArray[0];\n            }\n        }\n        if (specialCharacters) {\n            if (!specialCharacters.currentValue || !Array.isArray(specialCharacters.currentValue)) {\n                return;\n            }\n            else {\n                this._maskService.maskSpecialCharacters = specialCharacters.currentValue || [];\n            }\n        }\n        // Only overwrite the mask available patterns if a pattern has actually been passed in\n        if (patterns && patterns.currentValue) {\n            this._maskService.maskAvailablePatterns = patterns.currentValue;\n        }\n        if (prefix) {\n            this._maskService.prefix = prefix.currentValue;\n        }\n        if (suffix) {\n            this._maskService.suffix = suffix.currentValue;\n        }\n        if (thousandSeparator) {\n            this._maskService.thousandSeparator = thousandSeparator.currentValue;\n        }\n        if (decimalMarker) {\n            this._maskService.decimalMarker = decimalMarker.currentValue;\n        }\n        if (dropSpecialCharacters) {\n            this._maskService.dropSpecialCharacters = dropSpecialCharacters.currentValue;\n        }\n        if (hiddenInput) {\n            this._maskService.hiddenInput = hiddenInput.currentValue;\n        }\n        if (showMaskTyped) {\n            this._maskService.showMaskTyped = showMaskTyped.currentValue;\n        }\n        if (placeHolderCharacter) {\n            this._maskService.placeHolderCharacter = placeHolderCharacter.currentValue;\n        }\n        if (shownMaskExpression) {\n            this._maskService.shownMaskExpression = shownMaskExpression.currentValue;\n        }\n        if (showTemplate) {\n            this._maskService.showTemplate = showTemplate.currentValue;\n        }\n        if (clearIfNotMatch) {\n            this._maskService.clearIfNotMatch = clearIfNotMatch.currentValue;\n        }\n        if (validation) {\n            this._maskService.validation = validation.currentValue;\n        }\n        if (separatorLimit) {\n            this._maskService.separatorLimit = separatorLimit.currentValue;\n        }\n        if (allowNegativeNumbers) {\n            this._maskService.allowNegativeNumbers = allowNegativeNumbers.currentValue;\n            if (this._maskService.allowNegativeNumbers) {\n                this._maskService.maskSpecialCharacters = this._maskService.maskSpecialCharacters.filter((c) => c !== '-');\n            }\n        }\n        if (leadZeroDateTime) {\n            this._maskService.leadZeroDateTime = leadZeroDateTime.currentValue;\n        }\n        this._applyMask();\n    }\n    // tslint:disable-next-line: cyclomatic-complexity\n    validate({ value }) {\n        if (!this._maskService.validation || !this._maskValue) {\n            return null;\n        }\n        if (this._maskService.ipError) {\n            return this._createValidationError(value);\n        }\n        if (this._maskService.cpfCnpjError) {\n            return this._createValidationError(value);\n        }\n        if (this._maskValue.startsWith('separator')) {\n            return null;\n        }\n        if (withoutValidation.includes(this._maskValue)) {\n            return null;\n        }\n        if (this._maskService.clearIfNotMatch) {\n            return null;\n        }\n        if (timeMasks.includes(this._maskValue)) {\n            return this._validateTime(value);\n        }\n        if (value && value.toString().length >= 1) {\n            let counterOfOpt = 0;\n            for (const key in this._maskService.maskAvailablePatterns) {\n                if (this._maskService.maskAvailablePatterns[key].optional &&\n                    this._maskService.maskAvailablePatterns[key].optional === true) {\n                    if (this._maskValue.indexOf(key) !== this._maskValue.lastIndexOf(key)) {\n                        const opt = this._maskValue\n                            .split('')\n                            .filter((i) => i === key)\n                            .join('');\n                        counterOfOpt += opt.length;\n                    }\n                    else if (this._maskValue.indexOf(key) !== -1) {\n                        counterOfOpt++;\n                    }\n                    if (this._maskValue.indexOf(key) !== -1 && value.toString().length >= this._maskValue.indexOf(key)) {\n                        return null;\n                    }\n                    if (counterOfOpt === this._maskValue.length) {\n                        return null;\n                    }\n                }\n            }\n            if (this._maskValue.indexOf('{') === 1 &&\n                value.toString().length === this._maskValue.length + Number(this._maskValue.split('{')[1].split('}')[0]) - 4) {\n                return null;\n            }\n            if (this._maskValue.indexOf('*') === 1 || this._maskValue.indexOf('?') === 1) {\n                return null;\n            }\n            else if ((this._maskValue.indexOf('*') > 1 && value.toString().length < this._maskValue.indexOf('*')) ||\n                (this._maskValue.indexOf('?') > 1 && value.toString().length < this._maskValue.indexOf('?')) ||\n                this._maskValue.indexOf('{') === 1) {\n                return this._createValidationError(value);\n            }\n            if (this._maskValue.indexOf('*') === -1 || this._maskValue.indexOf('?') === -1) {\n                const length = this._maskService.dropSpecialCharacters\n                    ? this._maskValue.length - this._maskService.checkSpecialCharAmount(this._maskValue) - counterOfOpt\n                    : this._maskValue.length - counterOfOpt;\n                if (value.toString().length < length) {\n                    return this._createValidationError(value);\n                }\n            }\n        }\n        return null;\n    }\n    onPaste() {\n        this._justPasted = true;\n    }\n    onInput(e) {\n        const el = e.target;\n        this._inputValue = el.value;\n        this._setMask();\n        if (!this._maskValue) {\n            this.onChange(el.value);\n            return;\n        }\n        const position = el.selectionStart === 1\n            ? el.selectionStart + this._maskService.prefix.length\n            : el.selectionStart;\n        let caretShift = 0;\n        let backspaceShift = false;\n        this._maskService.applyValueChanges(position, this._justPasted, this._code === 'Backspace' || this._code === 'Delete', (shift, _backspaceShift) => {\n            this._justPasted = false;\n            caretShift = shift;\n            backspaceShift = _backspaceShift;\n        });\n        // only set the selection if the element is active\n        if (this.document.activeElement !== el) {\n            return;\n        }\n        this._position = this._position === 1 && this._inputValue.length === 1 ? null : this._position;\n        let positionToApply = this._position\n            ? this._inputValue.length + position + caretShift\n            : position + (this._code === 'Backspace' && !backspaceShift ? 0 : caretShift);\n        if (positionToApply > this._getActualInputLength()) {\n            positionToApply = this._getActualInputLength();\n        }\n        if (positionToApply < 0) {\n            positionToApply = 0;\n        }\n        el.setSelectionRange(positionToApply, positionToApply);\n        this._position = null;\n    }\n    onBlur() {\n        if (this._maskValue) {\n            this._maskService.clearIfNotMatchFn();\n        }\n        this.onTouch();\n    }\n    onFocus(e) {\n        if (!this._maskValue) {\n            return;\n        }\n        const el = e.target;\n        const posStart = 0;\n        const posEnd = 0;\n        if (el !== null &&\n            el.selectionStart !== null &&\n            el.selectionStart === el.selectionEnd &&\n            el.selectionStart > this._maskService.prefix.length &&\n            // tslint:disable-next-line\n            e.keyCode !== 38) {\n            if (this._maskService.showMaskTyped) {\n                // We are showing the mask in the input\n                this._maskService.maskIsShown = this._maskService.showMaskInInput();\n                if (el.setSelectionRange && this._maskService.prefix + this._maskService.maskIsShown === el.value) {\n                    // the input ONLY contains the mask, so position the cursor at the start\n                    el.focus();\n                    el.setSelectionRange(posStart, posEnd);\n                }\n                else {\n                    // the input contains some characters already\n                    if (el.selectionStart > this._maskService.actualValue.length) {\n                        // if the user clicked beyond our value's length, position the cursor at the end of our value\n                        el.setSelectionRange(this._maskService.actualValue.length, this._maskService.actualValue.length);\n                    }\n                }\n            }\n        }\n        const nextValue = !el.value || el.value === this._maskService.prefix\n            ? this._maskService.prefix + this._maskService.maskIsShown\n            : el.value;\n        /** Fix of cursor position jumping to end in most browsers no matter where cursor is inserted onFocus */\n        if (el.value !== nextValue) {\n            el.value = nextValue;\n        }\n        /** fix of cursor position with prefix when mouse click occur */\n        if ((el.selectionStart || el.selectionEnd) <= this._maskService.prefix.length) {\n            el.selectionStart = this._maskService.prefix.length;\n            return;\n        }\n        /** select only inserted text */\n        if (el.selectionEnd > this._getActualInputLength()) {\n            el.selectionEnd = this._getActualInputLength();\n        }\n    }\n    // tslint:disable-next-line: cyclomatic-complexity\n    onKeyDown(e) {\n        var _a;\n        if (!this._maskValue) {\n            return;\n        }\n        this._code = e.code ? e.code : e.key;\n        const el = e.target;\n        this._inputValue = el.value;\n        this._setMask();\n        if (e.keyCode === 38) {\n            e.preventDefault();\n        }\n        if (e.keyCode === 37 || e.keyCode === 8 || e.keyCode === 46) {\n            if (e.keyCode === 8 && el.value.length === 0) {\n                el.selectionStart = el.selectionEnd;\n            }\n            if (e.keyCode === 8 && el.selectionStart !== 0) {\n                // If specialChars is false, (shouldn't ever happen) then set to the defaults\n                this.specialCharacters = ((_a = this.specialCharacters) === null || _a === void 0 ? void 0 : _a.length)\n                    ? this.specialCharacters\n                    : this._config.specialCharacters;\n                if (this.prefix.length > 1 && el.selectionStart <= this.prefix.length) {\n                    el.setSelectionRange(this.prefix.length, this.prefix.length);\n                }\n                else {\n                    if (this._inputValue.length !== el.selectionStart && el.selectionStart !== 1) {\n                        while (this.specialCharacters.includes(this._inputValue[el.selectionStart - 1].toString()) &&\n                            ((this.prefix.length >= 1 && el.selectionStart > this.prefix.length) ||\n                                this.prefix.length === 0)) {\n                            el.setSelectionRange(el.selectionStart - 1, el.selectionStart - 1);\n                        }\n                    }\n                    this.suffixCheckOnPressDelete(e.keyCode, el);\n                }\n            }\n            this.suffixCheckOnPressDelete(e.keyCode, el);\n            if (this._maskService.prefix.length &&\n                el.selectionStart <= this._maskService.prefix.length &&\n                el.selectionEnd <= this._maskService.prefix.length) {\n                e.preventDefault();\n            }\n            const cursorStart = el.selectionStart;\n            // this.onFocus(e);\n            if (e.keyCode === 8 &&\n                !el.readOnly &&\n                cursorStart === 0 &&\n                el.selectionEnd === el.value.length &&\n                el.value.length !== 0) {\n                this._position = this._maskService.prefix ? this._maskService.prefix.length : 0;\n                this._maskService.applyMask(this._maskService.prefix, this._maskService.maskExpression, this._position);\n            }\n        }\n        if (!!this.suffix &&\n            this.suffix.length > 1 &&\n            this._inputValue.length - this.suffix.length < el.selectionStart) {\n            el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n        }\n        else if ((e.keyCode === 65 && e.ctrlKey === true) || // Ctrl+ A\n            (e.keyCode === 65 && e.metaKey === true) // Cmd + A (Mac)\n        ) {\n            el.setSelectionRange(0, this._getActualInputLength());\n            e.preventDefault();\n        }\n        this._maskService.selStart = el.selectionStart;\n        this._maskService.selEnd = el.selectionEnd;\n    }\n    /** It writes the value in the input */\n    writeValue(inputValue) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof inputValue === 'object' && inputValue !== null && 'value' in inputValue) {\n                if ('disable' in inputValue) {\n                    this.setDisabledState(Boolean(inputValue.disable));\n                }\n                inputValue = inputValue.value;\n            }\n            if (inputValue === undefined) {\n                inputValue = '';\n            }\n            if (typeof inputValue === 'number') {\n                inputValue = String(inputValue);\n                inputValue = this.decimalMarker !== '.' ? inputValue.replace('.', this.decimalMarker) : inputValue;\n                this._maskService.isNumberValue = true;\n            }\n            this._inputValue = inputValue;\n            this._setMask();\n            if ((inputValue && this._maskService.maskExpression) ||\n                (this._maskService.maskExpression && (this._maskService.prefix || this._maskService.showMaskTyped))) {\n                // Let the service we know we are writing value so that triggering onChange function wont happen during applyMask\n                this._maskService.writingValue = true;\n                this._maskService.formElementProperty = [\n                    'value',\n                    this._maskService.applyMask(inputValue, this._maskService.maskExpression),\n                ];\n                // Let the service know we've finished writing value\n                this._maskService.writingValue = false;\n            }\n            else {\n                this._maskService.formElementProperty = ['value', inputValue];\n            }\n            this._inputValue = inputValue;\n        });\n    }\n    registerOnChange(fn) {\n        this.onChange = fn;\n        this._maskService.onChange = this.onChange;\n    }\n    registerOnTouched(fn) {\n        this.onTouch = fn;\n    }\n    suffixCheckOnPressDelete(keyCode, el) {\n        if (keyCode === 46 && this.suffix.length > 0) {\n            if (this._inputValue.length - this.suffix.length <= el.selectionStart) {\n                el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n            }\n        }\n        if (keyCode === 8) {\n            if (this.suffix.length > 1 && this._inputValue.length - this.suffix.length < el.selectionStart) {\n                el.setSelectionRange(this._inputValue.length - this.suffix.length, this._inputValue.length);\n            }\n            if (this.suffix.length === 1 && this._inputValue.length === el.selectionStart) {\n                el.setSelectionRange(el.selectionStart - 1, el.selectionStart - 1);\n            }\n        }\n    }\n    /** It disables the input element */\n    setDisabledState(isDisabled) {\n        this._maskService.formElementProperty = ['disabled', isDisabled];\n    }\n    _repeatPatternSymbols(maskExp) {\n        return ((maskExp.match(/{[0-9]+}/) &&\n            maskExp.split('').reduce((accum, currval, index) => {\n                this._start = currval === '{' ? index : this._start;\n                if (currval !== '}') {\n                    return this._maskService._findSpecialChar(currval) ? accum + currval : accum;\n                }\n                this._end = index;\n                const repeatNumber = Number(maskExp.slice(this._start + 1, this._end));\n                const replaceWith = new Array(repeatNumber + 1).join(maskExp[this._start - 1]);\n                return accum + replaceWith;\n            }, '')) ||\n            maskExp);\n    }\n    // tslint:disable-next-line:no-any\n    _applyMask() {\n        this._maskService.maskExpression = this._repeatPatternSymbols(this._maskValue || '');\n        this._maskService.formElementProperty = [\n            'value',\n            this._maskService.applyMask(this._inputValue, this._maskService.maskExpression),\n        ];\n    }\n    _validateTime(value) {\n        const rowMaskLen = this._maskValue.split('').filter((s) => s !== ':').length;\n        if (!value) {\n            return null; // Don't validate empty values to allow for optional form control\n        }\n        if ((+value[value.length - 1] === 0 && value.length < rowMaskLen) || value.length <= rowMaskLen - 2) {\n            return this._createValidationError(value);\n        }\n        return null;\n    }\n    _getActualInputLength() {\n        return (this._maskService.actualValue.length || this._maskService.actualValue.length + this._maskService.prefix.length);\n    }\n    _createValidationError(actualValue) {\n        return {\n            mask: {\n                requiredMask: this._maskValue,\n                actualValue,\n            },\n        };\n    }\n    _setMask() {\n        if (this._maskExpressionArray.length > 0) {\n            this._maskExpressionArray.some((mask) => {\n                var _a, _b;\n                const test = ((_a = this._maskService.removeMask(this._inputValue)) === null || _a === void 0 ? void 0 : _a.length) <= ((_b = this._maskService.removeMask(mask)) === null || _b === void 0 ? void 0 : _b.length);\n                if (this._inputValue && test) {\n                    this._maskValue = mask;\n                    this.maskExpression = mask;\n                    this._maskService.maskExpression = mask;\n                    return test;\n                }\n                else {\n                    this._maskValue = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n                    this.maskExpression = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n                    this._maskService.maskExpression = this._maskExpressionArray[this._maskExpressionArray.length - 1];\n                }\n            });\n        }\n    }\n}\nMaskDirective.ɵfac = function MaskDirective_Factory(t) { return new (t || MaskDirective)(ɵngcc0.ɵɵdirectiveInject(DOCUMENT), ɵngcc0.ɵɵdirectiveInject(MaskService), ɵngcc0.ɵɵdirectiveInject(config)); };\nMaskDirective.ɵdir = /*@__PURE__*/ ɵngcc0.ɵɵdefineDirective({ type: MaskDirective, selectors: [[\"input\", \"mask\", \"\"], [\"textarea\", \"mask\", \"\"]], hostBindings: function MaskDirective_HostBindings(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"paste\", function MaskDirective_paste_HostBindingHandler() { return ctx.onPaste(); })(\"input\", function MaskDirective_input_HostBindingHandler($event) { return ctx.onInput($event); })(\"blur\", function MaskDirective_blur_HostBindingHandler() { return ctx.onBlur(); })(\"click\", function MaskDirective_click_HostBindingHandler($event) { return ctx.onFocus($event); })(\"keydown\", function MaskDirective_keydown_HostBindingHandler($event) { return ctx.onKeyDown($event); });\n    } }, inputs: { maskExpression: [\"mask\", \"maskExpression\"], specialCharacters: \"specialCharacters\", patterns: \"patterns\", prefix: \"prefix\", suffix: \"suffix\", thousandSeparator: \"thousandSeparator\", decimalMarker: \"decimalMarker\", dropSpecialCharacters: \"dropSpecialCharacters\", hiddenInput: \"hiddenInput\", showMaskTyped: \"showMaskTyped\", placeHolderCharacter: \"placeHolderCharacter\", shownMaskExpression: \"shownMaskExpression\", showTemplate: \"showTemplate\", clearIfNotMatch: \"clearIfNotMatch\", validation: \"validation\", separatorLimit: \"separatorLimit\", allowNegativeNumbers: \"allowNegativeNumbers\", leadZeroDateTime: \"leadZeroDateTime\" }, features: [ɵngcc0.ɵɵProvidersFeature([\n            {\n                provide: NG_VALUE_ACCESSOR,\n                useExisting: forwardRef(() => MaskDirective),\n                multi: true\n            },\n            {\n                provide: NG_VALIDATORS,\n                useExisting: forwardRef(() => MaskDirective),\n                multi: true\n            },\n            MaskService,\n        ]), ɵngcc0.ɵɵNgOnChangesFeature] });\nMaskDirective.ctorParameters = () => [\n    { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] }] },\n    { type: MaskService },\n    { type: undefined, decorators: [{ type: Inject, args: [config,] }] }\n];\nMaskDirective.propDecorators = {\n    maskExpression: [{ type: Input, args: ['mask',] }],\n    specialCharacters: [{ type: Input }],\n    patterns: [{ type: Input }],\n    prefix: [{ type: Input }],\n    suffix: [{ type: Input }],\n    thousandSeparator: [{ type: Input }],\n    decimalMarker: [{ type: Input }],\n    dropSpecialCharacters: [{ type: Input }],\n    hiddenInput: [{ type: Input }],\n    showMaskTyped: [{ type: Input }],\n    placeHolderCharacter: [{ type: Input }],\n    shownMaskExpression: [{ type: Input }],\n    showTemplate: [{ type: Input }],\n    clearIfNotMatch: [{ type: Input }],\n    validation: [{ type: Input }],\n    separatorLimit: [{ type: Input }],\n    allowNegativeNumbers: [{ type: Input }],\n    leadZeroDateTime: [{ type: Input }],\n    onPaste: [{ type: HostListener, args: ['paste',] }],\n    onInput: [{ type: HostListener, args: ['input', ['$event'],] }],\n    onBlur: [{ type: HostListener, args: ['blur',] }],\n    onFocus: [{ type: HostListener, args: ['click', ['$event'],] }],\n    onKeyDown: [{ type: HostListener, args: ['keydown', ['$event'],] }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskDirective, [{\n        type: Directive,\n        args: [{\n                selector: 'input[mask], textarea[mask]',\n                providers: [\n                    {\n                        provide: NG_VALUE_ACCESSOR,\n                        useExisting: forwardRef(() => MaskDirective),\n                        multi: true\n                    },\n                    {\n                        provide: NG_VALIDATORS,\n                        useExisting: forwardRef(() => MaskDirective),\n                        multi: true\n                    },\n                    MaskService,\n                ]\n            }]\n    }], function () { return [{ type: undefined, decorators: [{\n                type: Inject,\n                args: [DOCUMENT]\n            }] }, { type: MaskService }, { type: undefined, decorators: [{\n                type: Inject,\n                args: [config]\n            }] }]; }, { maskExpression: [{\n            type: Input,\n            args: ['mask']\n        }], specialCharacters: [{\n            type: Input\n        }], patterns: [{\n            type: Input\n        }], prefix: [{\n            type: Input\n        }], suffix: [{\n            type: Input\n        }], thousandSeparator: [{\n            type: Input\n        }], decimalMarker: [{\n            type: Input\n        }], dropSpecialCharacters: [{\n            type: Input\n        }], hiddenInput: [{\n            type: Input\n        }], showMaskTyped: [{\n            type: Input\n        }], placeHolderCharacter: [{\n            type: Input\n        }], shownMaskExpression: [{\n            type: Input\n        }], showTemplate: [{\n            type: Input\n        }], clearIfNotMatch: [{\n            type: Input\n        }], validation: [{\n            type: Input\n        }], separatorLimit: [{\n            type: Input\n        }], allowNegativeNumbers: [{\n            type: Input\n        }], leadZeroDateTime: [{\n            type: Input\n        }], onPaste: [{\n            type: HostListener,\n            args: ['paste']\n        }], onInput: [{\n            type: HostListener,\n            args: ['input', ['$event']]\n        }], onBlur: [{\n            type: HostListener,\n            args: ['blur']\n        }], onFocus: [{\n            type: HostListener,\n            args: ['click', ['$event']]\n        }], \n    // tslint:disable-next-line: cyclomatic-complexity\n    onKeyDown: [{\n            type: HostListener,\n            args: ['keydown', ['$event']]\n        }] }); })();\n\nclass MaskPipe {\n    constructor(_maskService) {\n        this._maskService = _maskService;\n    }\n    transform(value, mask, thousandSeparator = null) {\n        if (!value && typeof value !== 'number') {\n            return '';\n        }\n        if (thousandSeparator) {\n            this._maskService.thousandSeparator = thousandSeparator;\n        }\n        if (typeof mask === 'string') {\n            return this._maskService.applyMask(`${value}`, mask);\n        }\n        return this._maskService.applyMaskWithPattern(`${value}`, mask);\n    }\n}\nMaskPipe.ɵfac = function MaskPipe_Factory(t) { return new (t || MaskPipe)(ɵngcc0.ɵɵdirectiveInject(MaskApplierService, 16)); };\nMaskPipe.ɵpipe = /*@__PURE__*/ ɵngcc0.ɵɵdefinePipe({ name: \"mask\", type: MaskPipe, pure: true });\nMaskPipe.ctorParameters = () => [\n    { type: MaskApplierService }\n];\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(MaskPipe, [{\n        type: Pipe,\n        args: [{\n                name: 'mask',\n                pure: true\n            }]\n    }], function () { return [{ type: MaskApplierService }]; }, null); })();\n\nclass NgxMaskModule {\n    static forRoot(configValue) {\n        return {\n            ngModule: NgxMaskModule,\n            providers: [\n                {\n                    provide: NEW_CONFIG,\n                    useValue: configValue,\n                },\n                {\n                    provide: INITIAL_CONFIG,\n                    useValue: initialConfig,\n                },\n                {\n                    provide: config,\n                    useFactory: _configFactory,\n                    deps: [INITIAL_CONFIG, NEW_CONFIG],\n                },\n                MaskApplierService,\n            ],\n        };\n    }\n    static forChild() {\n        return {\n            ngModule: NgxMaskModule,\n        };\n    }\n}\nNgxMaskModule.ɵfac = function NgxMaskModule_Factory(t) { return new (t || NgxMaskModule)(); };\nNgxMaskModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: NgxMaskModule });\nNgxMaskModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({});\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(NgxMaskModule, [{\n        type: NgModule,\n        args: [{\n                exports: [MaskDirective, MaskPipe],\n                declarations: [MaskDirective, MaskPipe]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NgxMaskModule, { declarations: [MaskDirective, MaskPipe], exports: [MaskDirective, MaskPipe] }); })();\n/**\n * @internal\n */\nfunction _configFactory(initConfig, configValue) {\n    return configValue instanceof Function ? Object.assign(Object.assign({}, initConfig), configValue()) : Object.assign(Object.assign({}, initConfig), configValue);\n}\n\nconst commonjsGlobal = typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof window !== 'undefined'\n        ? window\n        : typeof global !== 'undefined'\n            ? global\n            : typeof self !== 'undefined'\n                ? self\n                : {};\n(function () {\n    if (!commonjsGlobal.KeyboardEvent) {\n        commonjsGlobal.KeyboardEvent = function (_eventType, _init) { };\n    }\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { INITIAL_CONFIG, MaskApplierService, MaskDirective, MaskPipe, MaskService, NEW_CONFIG, NgxMaskModule, _configFactory, config, initialConfig, timeMasks, withoutValidation };\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}